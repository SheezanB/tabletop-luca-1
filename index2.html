<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luca Restaurant - Book a Table</title>
    
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom scrollbar for better mobile experience */
        ::-webkit-scrollbar {
            height: 4px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
        
        /* Inter Font Family */
        body, button, input, textarea, select {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        /* Custom checkbox styling with green accent */
        input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            width: 16px;
            height: 16px;
            border: 2px solid #d1d5db;
            border-radius: 3px;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }
        
        input[type="checkbox"]:checked {
            background-color: #2c3f2f;
            border-color: #2c3f2f;
        }
        
        input[type="checkbox"]:checked::after {
            content: '';
            position: absolute;
            left: 4px;
            top: 1px;
            width: 4px;
            height: 8px;
            border: solid white;
            border-width: 0 2px 2px 0;
            transform: rotate(45deg);
        }
        
        input[type="checkbox"]:hover {
            border-color: #2c3f2f;
        }
        
        /* Custom date input styling */
        input[type="date"] {
            position: relative;
            background-color: white;
            cursor: pointer;
        }
        
        /* Style the calendar icon */
        input[type="date"]::-webkit-calendar-picker-indicator {
            cursor: pointer;
            opacity: 0.6;
            filter: invert(0);
            transition: opacity 0.2s ease;
        }
        
        input[type="date"]:hover::-webkit-calendar-picker-indicator {
            opacity: 1;
        }
        
        /* Focus state for date input */
        input[type="date"]:focus {
            border-color: #2c3f2f !important;
            outline: none;
        }
        
        /* Style for select dropdowns */
        select {
            cursor: pointer;
            background-color: white;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23000000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
        }
        
        select:focus {
            border-color: #2c3f2f !important;
            outline: none;
        }
        
        /* Hide scrollbar for What's New page while keeping scroll functionality */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
    
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // Lucide React icons
        const Play = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="5,3 19,12 5,21"></polygon>
            </svg>
        );

        const Pause = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="6" y="4" width="4" height="16"></rect>
                <rect x="14" y="4" width="4" height="16"></rect>
            </svg>
        );

        const Maximize2 = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="15,3 21,3 21,9"></polyline>
                <polyline points="9,21 3,21 3,15"></polyline>
                <line x1="21" y1="3" x2="14" y2="10"></line>
                <line x1="3" y1="21" x2="10" y2="14"></line>
            </svg>
        );

        const Minimize2 = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="4,14 10,14 10,20"></polyline>
                <polyline points="20,10 14,10 14,4"></polyline>
                <line x1="14" y1="10" x2="21" y2="3"></line>
                <line x1="3" y1="21" x2="10" y2="14"></line>
            </svg>
        );

        const Info = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="12" y1="16" x2="12" y2="12"></line>
                <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
        );

        const X = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        );

        const SparkleStar = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 1L14 8L21 10L14 12L12 19L10 12L3 10L10 8L12 1Z" fill="url(#sparkle-gradient)" stroke="url(#sparkle-gradient)" strokeWidth="1.5" strokeLinejoin="round"/>
                <defs>
                    <linearGradient id="sparkle-gradient" x1="12" y1="2" x2="12" y2="18" gradientUnits="userSpaceOnUse">
                        <stop offset="0%" stopColor="#3d5440" stopOpacity="0.9"/>
                        <stop offset="100%" stopColor="#2c3f2f" stopOpacity="1"/>
                    </linearGradient>
                </defs>
            </svg>
        );

        const Volume2 = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
            </svg>
        );

        const VolumeX = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"></polygon>
                <line x1="23" y1="9" x2="17" y2="15"></line>
                <line x1="17" y1="9" x2="23" y2="15"></line>
            </svg>
        );

        const ChevronUp = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="18,15 12,9 6,15"></polyline>
            </svg>
        );

        const ChevronDown = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="6,9 12,15 18,9"></polyline>
            </svg>
        );

        const Plus = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
        );

        const ChevronLeft = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="15,18 9,12 15,6"></polyline>
            </svg>
        );

        const Bell = ({ className, ...props }) => (
            <svg className={className} {...props} width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
            </svg>
        );

        // Custom Calendar Component
        const CustomCalendar = ({ selectedDate, onSelectDate, onClose, getNextDays }) => {
          const [currentMonth, setCurrentMonth] = useState(new Date());
          
          const daysInMonth = (date) => {
            return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
          };
          
          const firstDayOfMonth = (date) => {
            return new Date(date.getFullYear(), date.getMonth(), 1).getDay();
          };
          
          const monthNames = ['JANUARY', 'FEBRUARY', 'MARCH', 'APRIL', 'MAY', 'JUNE', 'JULY', 'AUGUST', 'SEPTEMBER', 'OCTOBER', 'NOVEMBER', 'DECEMBER'];
          const dayNames = ['SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
          
          const goToPrevMonth = () => {
            setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1));
          };
          
          const goToNextMonth = () => {
            setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1));
          };
          
          const isDateSelectable = (dateStr) => {
            const availableDates = getNextDays();
            return availableDates.includes(dateStr);
          };
          
          const isDateSelected = (dateStr) => {
            return selectedDate === dateStr;
          };
          
          const today = new Date();
          const daysCount = daysInMonth(currentMonth);
          const firstDay = firstDayOfMonth(currentMonth);
          const days = [];
          
          // Add empty cells for days before the first day of month
          for (let i = 0; i < firstDay; i++) {
            days.push(<div key={`empty-${i}`} className="p-2"></div>);
          }
          
          // Add days of the month
          for (let day = 1; day <= daysCount; day++) {
            const dateStr = `${currentMonth.getFullYear()}-${String(currentMonth.getMonth() + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            const isSelectable = isDateSelectable(dateStr);
            const isSelected = isDateSelected(dateStr);
            const isToday = today.getDate() === day && today.getMonth() === currentMonth.getMonth() && today.getFullYear() === currentMonth.getFullYear();
            
            days.push(
              <button
                key={day}
                onClick={() => {
                  if (isSelectable) {
                    onSelectDate(dateStr);
                    onClose();
                  }
                }}
                disabled={!isSelectable}
                style={isSelected ? { backgroundColor: '#2c3f2f', color: 'white' } : {}}
                className={`p-2 text-xs font-medium rounded-lg transition-all ${
                  isSelectable 
                    ? 'hover:bg-gray-100 cursor-pointer text-black' 
                    : 'text-gray-300 cursor-not-allowed'
                } ${isToday && !isSelected ? 'border border-gray-300' : ''}`}
              >
                {day}
              </button>
            );
          }
          
          return (
            <div className="fixed inset-0 bg-black bg-opacity-50 z-[100] flex items-center justify-center p-4" onClick={onClose}>
              <div className="bg-white rounded-lg shadow-xl max-w-sm w-full" onClick={(e) => e.stopPropagation()}>
                {/* Reservation Advance Notice */}
                <div className="px-4 pt-4 pb-2">
                  <p className="text-sm text-center text-gray-600">
                    Reservations can be made 90 days in advance
                  </p>
                </div>
                
                {/* Header */}
                <div className="p-4 border-b border-gray-200">
                  <div className="flex items-center justify-between mb-4">
                    <button onClick={goToPrevMonth} className="p-2 hover:bg-gray-100 rounded-lg transition-all">
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                        <polyline points="15 18 9 12 15 6"></polyline>
                      </svg>
                    </button>
                    <div className="text-sm font-semibold text-black">
                      {monthNames[currentMonth.getMonth()]} {currentMonth.getFullYear()}
                    </div>
                    <button onClick={goToNextMonth} className="p-2 hover:bg-gray-100 rounded-lg transition-all">
                      <svg className="w-5 h-5" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                        <polyline points="9 18 15 12 9 6"></polyline>
                      </svg>
                    </button>
                  </div>
                  
                  {/* Day names */}
                  <div className="grid grid-cols-7 gap-1 mb-2">
                    {dayNames.map(day => (
                      <div key={day} className="text-xs font-medium text-gray-500 text-center p-1">
                        {day}
                      </div>
                    ))}
                  </div>
                </div>
                
                {/* Calendar grid */}
                <div className="p-4">
                  <div className="grid grid-cols-7 gap-1">
                    {days}
                  </div>
                </div>
                
                {/* Close button */}
                <div className="p-4 border-t border-gray-200">
                  <button 
                    onClick={onClose}
                    className="w-full py-2 text-xs font-medium text-black hover:bg-gray-100 rounded-lg transition-all"
                  >
                    CLOSE
                  </button>
                </div>
              </div>
            </div>
          );
        };

        const TabletopMobileApp = () => {
          // Set default date to tomorrow (next day with available tables)
          const getTomorrowDate = () => {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            return tomorrow.toISOString().split('T')[0];
          };
          const [selectedDate, setSelectedDate] = useState(getTomorrowDate());
          const [selectedTime, setSelectedTime] = useState('');
          const [selectedTimeType, setSelectedTimeType] = useState('main');
          const [partySize, setPartySize] = useState('2');
          const [isVideoPlaying, setIsVideoPlaying] = useState(true);
          const [isVideoExpanded, setIsVideoExpanded] = useState(false);
          const [isVideoVisible, setIsVideoVisible] = useState(true);
          const [isVideoMuted, setIsVideoMuted] = useState(true);
          const [currentVideoIndex, setCurrentVideoIndex] = useState(0);
          const [showBookingModal, setShowBookingModal] = useState(false);
          const [expandedSection, setExpandedSection] = useState(null);
          const [timeRemaining, setTimeRemaining] = useState(300); // 5 minutes in seconds
          const [policyModal, setPolicyModal] = useState({ isOpen: false, title: '', content: '' });
          const [isDescriptionExpanded, setIsDescriptionExpanded] = useState(false);
          const [cancelPolicyChecked, setCancelPolicyChecked] = useState(false);
          const [showCancelPolicyError, setShowCancelPolicyError] = useState(false);
          const [showAlertModal, setShowAlertModal] = useState(false);
          const [showAlertConfirmation, setShowAlertConfirmation] = useState(false);
          const [alertDate, setAlertDate] = useState('');
          const [alertPartySize, setAlertPartySize] = useState('2');
          const [alertFirstName, setAlertFirstName] = useState('');
          const [alertLastName, setAlertLastName] = useState('');
          const [alertEmail, setAlertEmail] = useState('');
          const [alertPhone, setAlertPhone] = useState('');
          const [alertStartTime, setAlertStartTime] = useState('');
          const [alertEndTime, setAlertEndTime] = useState('');
          const [showCalendar, setShowCalendar] = useState(false);
          const [showAlertCalendar, setShowAlertCalendar] = useState(false);
          const [filterTime, setFilterTime] = useState('7:00 PM');
          
          // Chef's Menu upgrades state
          const [showWhatsNew, setShowWhatsNew] = useState(false);
          const [cameFromWhatsNew, setCameFromWhatsNew] = useState(false);
          
          // Font size controls for What's New page
          const [fontSizes, setFontSizes] = useState({
            subtitle: 14,
            title: 21,
            price: 18,
            description: 15
          });
          
          // Spacing controls for What's New page
          const [spacings, setSpacings] = useState({
            subtitleBottom: 6,
            titleBottom: 2,
            priceBottom: 3
          });
          
          const [upgrades, setUpgrades] = useState({
            chefsMenu: { quantity: 0, price: 95, expanded: false },
            winePairing: { quantity: 0, price: 125, expanded: false }
          });
          const [upgradeVideoPlaying, setUpgradeVideoPlaying] = useState(null);
          const upgradeVideoRef = useRef(null);
          const upgradePipRef = useRef(null);
          
          // Helper functions for Chef's Menu upgrades
          const updateUpgradeQuantity = (upgradeKey, delta) => {
            setUpgrades(prev => ({
              ...prev,
              [upgradeKey]: {
                ...prev[upgradeKey],
                quantity: Math.max(0, prev[upgradeKey].quantity + delta)
              }
            }));
          };
          
          const toggleUpgradeExpanded = (upgradeKey) => {
            setUpgrades(prev => ({
              ...prev,
              [upgradeKey]: {
                ...prev[upgradeKey],
                expanded: !prev[upgradeKey].expanded
              }
            }));
          };
          
          const calculateUpgradesTotal = () => {
            return Object.values(upgrades).reduce((total, upgrade) => {
              return total + (upgrade.quantity * upgrade.price);
            }, 0);
          };
          
          const upgradeVideoSources = {
            chefsMenu: 'Luca_Chefs_Menu_Montage.mp4',
            winePairing: 'Luca_Truffle_Menu_Wine_Pairing.mp4'
          };
          const [showConfirmation, setShowConfirmation] = useState(false);
          const [firstName, setFirstName] = useState('');
          const [lastName, setLastName] = useState('');
          const [email, setEmail] = useState('');
          const [phoneNumber, setPhoneNumber] = useState('');
          const [showFieldErrors, setShowFieldErrors] = useState(false);
          const videoRef = useRef(null);

          // Video sources array - changes based on party size
          const videos = partySize === '7+' ? [
            {
              src: 'garden-room-video.mp4',
              title: 'The Garden Room',
              shortDescription: 'Rustic sanctuary overlooking our buzzy kitchen • Up to 8 guests • £120 per person',
              description: 'The rustic canvas of the foliage-filled Garden Room conjures up dreams of Little Italy. Settle into the comforting surroundings of our secluded sanctuary, with the space looking into the buzzy kitchen.\n\nWe offer a seasonal six-course menu, priced at £120 per person.\n\nWe aim to accommodate all dietary requirements. A member of our private dining team will be in touch to confirm any dietary requirement and assist you in organising your private dining experience.'
            },
            {
              src: 'pasta-room-video.mp4',
              title: 'The Pasta Room',
              shortDescription: 'Heart of our daily pasta production • Up to 10 guests • £120 per person',
              description: 'The Pasta Room emanates Italian soul and warmth, and is the centre of our daily pasta production • Up to 10 guests • £120 per person'
            }
          ] : [
            {
              src: 'main-dining-room-video.mp4',
              title: 'The Dining Room',
              shortDescription: 'Experience our signature à la carte menu in the heart of Luca',
              description: 'Experience our signature à la carte menu in the heart of Luca'
            },
            {
              src: 'Luca_Bar.mp4',
              title: 'The Bar',
              shortDescription: 'Bar reservations are exclusively for guests dining with us in parties of 1 to 4',
              description: 'Bar reservations are exclusively for guests dining with us in parties of 1 to 4'
            }
          ];

          // Ensure currentVideoIndex is valid for the current videos array
          const safeVideoIndex = currentVideoIndex < videos.length ? currentVideoIndex : 0;
          const currentVideo = videos[safeVideoIndex];

          // Update video source when currentVideoIndex changes or when the video at that index changes
          useEffect(() => {
            if (!currentVideo) return;
            console.log('Loading video:', currentVideo.src);
            if (videoRef.current) {
              const video = videoRef.current;
              video.src = currentVideo.src;
              video.load();
              if (isVideoPlaying) {
                video.play().catch(e => console.error('Video play failed:', e));
              }
            }
          }, [currentVideo?.src, isVideoPlaying]);

          // Reset video index when party size changes to ensure we're showing the correct videos
          useEffect(() => {
            setCurrentVideoIndex(0);
            setSelectedDate(new Date().toISOString().split('T')[0]);
            setSelectedTime('');
          }, [partySize]);

          // Ensure currentVideoIndex stays in bounds when videos array changes
          useEffect(() => {
            if (currentVideoIndex >= videos.length) {
              setCurrentVideoIndex(0);
            }
          }, [videos.length]);

          // Reset description expanded state when video changes
          useEffect(() => {
            setIsDescriptionExpanded(false);
          }, [currentVideoIndex]);

          // Clear date and time selections when switching videos
          useEffect(() => {
            setSelectedDate(new Date().toISOString().split('T')[0]);
            setSelectedTime('');
          }, [currentVideoIndex]);

          // Countdown timer for booking modal
          useEffect(() => {
            if (showBookingModal && timeRemaining > 0) {
              const timer = setInterval(() => {
                setTimeRemaining(prev => prev - 1);
              }, 1000);
              return () => clearInterval(timer);
            }
          }, [showBookingModal, timeRemaining]);

          // Reset timer when modal opens
          useEffect(() => {
            if (showBookingModal) {
              setTimeRemaining(300); // Reset to 5 minutes when modal opens
              setShowCancelPolicyError(false); // Reset error state
              setShowFieldErrors(false); // Reset field errors
            }
          }, [showBookingModal]);

          // Ensure clean audio when video size changes
          useEffect(() => {
            if (videoRef.current) {
              // Force a clean audio state by ensuring only one audio context
              const video = videoRef.current;
              
              // Remove any duplicate audio contexts
              if (video.paused && isVideoExpanded !== undefined) {
                video.play().catch(err => console.log('Video play on expand:', err));
              }
            }
          }, [isVideoExpanded]);

          // Time slots
          const mainDiningSlots = ['6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM'];
          const barExpressSlots = ['12:00 PM', '1:00 PM', '1:30 PM', '6:00 PM', '6:30 PM', '7:00 PM', '7:30 PM', '8:00 PM', '8:30 PM', '9:00 PM'];
          const gardenRoomSlots = ['6:00 PM', '7:00 PM', '8:00 PM', '9:00 PM'];
          const pastaRoomSlots = ['6:00 PM', '7:00 PM', '8:00 PM', '9:00 PM'];

          // Function to check if a time is within 2 hours of the filter time
          const isWithinOneHour = (slotTime, filterTime) => {
            if (!filterTime) return true; // Show all if no filter selected
            
            const parseTime = (timeStr) => {
              const [time, period] = timeStr.split(' ');
              let [hours, minutes] = time.split(':').map(Number);
              if (period === 'PM' && hours !== 12) hours += 12;
              if (period === 'AM' && hours === 12) hours = 0;
              return hours * 60 + minutes;
            };
            
            const slotMinutes = parseTime(slotTime);
            const filterMinutes = parseTime(filterTime);
            const diff = Math.abs(slotMinutes - filterMinutes);
            
            return diff <= 120; // Within 120 minutes (2 hours)
          };

          // Filter time slots based on selected filter time
          const filteredMainDiningSlots = mainDiningSlots.filter(time => isWithinOneHour(time, filterTime));
          const filteredBarExpressSlots = barExpressSlots.filter(time => isWithinOneHour(time, filterTime));

          // Generate next 14 days - returning date strings for calendar
          const getNextDays = () => {
            const days = [];
            for (let i = 0; i < 14; i++) {
              const date = new Date();
              date.setDate(date.getDate() + i);
              const dateStr = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
              days.push(dateStr);
            }
            return days;
          };

          const formatDate = (dateStr) => {
            if (!dateStr) return 'Select date';
            // Parse date string to Date object
            const parts = dateStr.split('-');
            const year = parseInt(parts[0]);
            const month = parseInt(parts[1]) - 1;
            const day = parseInt(parts[2]);
            const date = new Date(year, month, day);
            
            return date.toLocaleDateString('en-US', { 
              weekday: 'short', 
              month: 'short', 
              day: 'numeric' 
            });
          };

          const formatTimeRemaining = (seconds) => {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
          };

          const toggleVideo = () => {
            if (videoRef.current) {
              if (isVideoPlaying) {
                videoRef.current.pause();
              } else {
                videoRef.current.play();
              }
              setIsVideoPlaying(!isVideoPlaying);
            }
          };

          const toggleVideoSize = () => {
            // Ensure clean audio state during transition
            if (videoRef.current) {
              const currentTime = videoRef.current.currentTime;
              const wasMuted = videoRef.current.muted;
              
              // Briefly pause to prevent audio overlap
              videoRef.current.pause();
              
              setIsVideoExpanded(!isVideoExpanded);
              
              // Resume playback after state change with same settings
              setTimeout(() => {
                if (videoRef.current) {
                  videoRef.current.currentTime = currentTime;
                  videoRef.current.muted = wasMuted;
                  videoRef.current.play().catch(err => console.log('Playback resumed:', err));
                }
              }, 50);
            } else {
              setIsVideoExpanded(!isVideoExpanded);
            }
          };

          const closeVideo = () => {
            setIsVideoVisible(false);
            setIsVideoExpanded(false);
          };

          const toggleVolume = () => {
            setIsVideoMuted(!isVideoMuted);
            
            // Control main video
            if (videoRef.current) {
              videoRef.current.muted = !isVideoMuted;
            }
            
            // Control upgrade video
            if (upgradePipRef.current) {
              upgradePipRef.current.muted = !isVideoMuted;
            }
            
            // Control fullscreen upgrade video
            if (upgradeVideoRef.current) {
              upgradeVideoRef.current.muted = !isVideoMuted;
            }
          };

          const navigateVideo = (direction) => {
            if (direction === 'up' && currentVideoIndex > 0) {
              setCurrentVideoIndex(currentVideoIndex - 1);
            } else if (direction === 'down' && currentVideoIndex < videos.length - 1) {
              setCurrentVideoIndex(currentVideoIndex + 1);
            }
          };

          const handleTimeSelection = (time, type) => {
            setSelectedTime(time);
            setSelectedTimeType(type);
          };

          const handleContinueBooking = () => {
            // Validate that both date and time are selected
            if (!selectedDate || !selectedTime) {
              return;
            }
            // Reset video expanded state when leaving main page
            setIsVideoExpanded(false);
            // Show upgrades for Dining Room and Bar
            if (selectedTimeType === 'main' || selectedTimeType === 'bar') {
              setShowWhatsNew(true);
            } else {
              // For other seating areas, go directly to booking modal
              setCameFromWhatsNew(false);
              setShowBookingModal(true);
            }
          };

          const isDateSelected = (dateStr) => {
            if (!selectedDate) return false;
            return selectedDate === dateStr;
          };

          const isTimeSelected = (time, type) => {
            return selectedTime === time && selectedTimeType === type;
          };

          return (
            <div className="min-h-screen bg-white text-black" style={{ fontFamily: "'Inter', sans-serif" }}>
              {/* Booking Form */}
              <div className="p-4">
                {/* Logo Section */}
                <div className="flex justify-center mb-4">
                  <img 
                    src="luca-logo.jpg" 
                    alt="Luca Restaurant" 
                    className="h-12 w-auto object-contain max-w-full"
                    onError={(e) => {
                      console.log('Logo failed to load, showing text fallback');
                      e.target.style.display = 'none';
                      e.target.nextSibling.style.display = 'block';
                    }}
                    onLoad={(e) => {
                      console.log('Logo loaded successfully');
                    }}
                  />
                  <div className="text-2xl font-bold tracking-wider text-black" style={{display: 'none'}}>
                    LUCA
                  </div>
                </div>
                
                {/* Filter Container - Unified Dropdowns */}
                <div className="mb-4">
                  <div className="w-full bg-white rounded-lg overflow-hidden" style={{ border: '1px solid #e5e5e5' }}>
                    <div className="grid grid-cols-3" style={{ borderLeft: '0', borderRight: '0' }}>
                      {/* Guests Dropdown */}
                      <div style={{ borderRight: '1px solid #e5e5e5' }}>
                        <select
                          value={partySize}
                          onChange={(e) => setPartySize(e.target.value)}
                          style={{
                            appearance: 'none',
                            WebkitAppearance: 'none',
                            MozAppearance: 'none',
                            backgroundImage: 'none'
                          }}
                          className="w-full px-4 py-3 bg-transparent border-0 text-sm font-medium text-black transition-all hover:bg-gray-50 focus:outline-none focus:bg-gray-50 cursor-pointer text-center"
                        >
                          <option value="1">1 GUEST</option>
                          <option value="2">2 GUESTS</option>
                          <option value="3">3 GUESTS</option>
                          <option value="4">4 GUESTS</option>
                          <option value="5">5 GUESTS</option>
                          <option value="6">6 GUESTS</option>
                          <option value="7+">7+ GUESTS</option>
                        </select>
                      </div>

                      {/* Date Button - Opens Calendar Modal */}
                      <div style={{ borderRight: '1px solid #e5e5e5' }}>
                        <button
                          onClick={() => setShowCalendar(true)}
                          className="w-full px-4 py-3 bg-transparent border-0 text-sm font-medium text-black transition-all hover:bg-gray-50 focus:outline-none focus:bg-gray-50 cursor-pointer text-center"
                        >
                          {(() => {
                            try {
                              if (!selectedDate) return 'SELECT DATE';
                              
                              // Parse date string correctly to avoid timezone issues
                              const parts = selectedDate.split('-');
                              const year = parseInt(parts[0]);
                              const month = parseInt(parts[1]) - 1;
                              const day = parseInt(parts[2]);
                              const dateObj = new Date(year, month, day);
                              
                              // Check if it's today
                              const today = new Date();
                              const isToday = dateObj.getDate() === today.getDate() && 
                                              dateObj.getMonth() === today.getMonth() && 
                                              dateObj.getFullYear() === today.getFullYear();
                              
                              if (isToday) return 'TODAY';
                              
                              const dayName = dateObj.toLocaleDateString('en-US', { weekday: 'short' }).toUpperCase();
                              const monthDay = dateObj.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }).toUpperCase();
                              
                              return `${dayName}, ${monthDay}`;
                            } catch (error) {
                              console.error('Date parsing error:', error);
                              return 'TODAY';
                            }
                          })()}
                        </button>
                      </div>

                      {/* Time Dropdown */}
                      <div>
                        <select
                          value={filterTime}
                          onChange={(e) => setFilterTime(e.target.value)}
                          style={{
                            appearance: 'none',
                            WebkitAppearance: 'none',
                            MozAppearance: 'none',
                            backgroundImage: 'none'
                          }}
                          className="w-full px-4 py-3 bg-transparent border-0 text-sm font-medium text-black transition-all hover:bg-gray-50 focus:outline-none focus:bg-gray-50 cursor-pointer text-center"
                        >
                          <option value="">ANY TIME</option>
                          <option value="10:00 AM">10:00 AM</option>
                          <option value="10:30 AM">10:30 AM</option>
                          <option value="11:00 AM">11:00 AM</option>
                          <option value="11:30 AM">11:30 AM</option>
                          <option value="12:00 PM">12:00 PM</option>
                          <option value="12:30 PM">12:30 PM</option>
                          <option value="1:00 PM">1:00 PM</option>
                          <option value="1:30 PM">1:30 PM</option>
                          <option value="2:00 PM">2:00 PM</option>
                          <option value="2:30 PM">2:30 PM</option>
                          <option value="3:00 PM">3:00 PM</option>
                          <option value="3:30 PM">3:30 PM</option>
                          <option value="4:00 PM">4:00 PM</option>
                          <option value="4:30 PM">4:30 PM</option>
                          <option value="5:00 PM">5:00 PM</option>
                          <option value="5:30 PM">5:30 PM</option>
                          <option value="6:00 PM">6:00 PM</option>
                          <option value="6:30 PM">6:30 PM</option>
                          <option value="7:00 PM">7:00 PM</option>
                          <option value="7:30 PM">7:30 PM</option>
                          <option value="8:00 PM">8:00 PM</option>
                          <option value="8:30 PM">8:30 PM</option>
                          <option value="9:00 PM">9:00 PM</option>
                          <option value="9:30 PM">9:30 PM</option>
                          <option value="10:00 PM">10:00 PM</option>
                          <option value="10:30 PM">10:30 PM</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>

                {partySize === '7+' && (
                  <div className="mb-8">
                    <div className="flex items-center gap-2 mb-2">
                      <button 
                        onClick={() => {
                          setIsVideoVisible(true);
                          setIsVideoExpanded(true);
                          setCurrentVideoIndex(0);
                        }}
                        className="text-sm font-medium text-black tracking-wider cursor-pointer"
                      >
                        THE GARDEN ROOM
                      </button>
                      <button 
                        onClick={() => {
                          setIsVideoVisible(true);
                          setIsVideoExpanded(true);
                          setCurrentVideoIndex(0);
                        }}
                        className="text-gray-400 hover:text-blue-600 transition-colors"
                      >
                        <Info className="w-4 h-4" />
                      </button>
                    </div>
                    <div className="text-sm text-black leading-relaxed mb-3">
                      The foliage-filled Garden Room conjures dreams of Little Italy. This rustic, secluded sanctuary overlooks our buzzy kitchen. We offer a seasonal six-course menu priced at £120 per person.
                    </div>
                  </div>
                )}

                {/* Time Selection - Second Option - Main Dining */}
                {partySize !== '7+' && filteredMainDiningSlots.length > 0 && (
                  <div className="mb-4">
                    <div className="flex items-center gap-2 mb-2">
                      <button 
                        onClick={() => {
                          setIsVideoVisible(true);
                          setIsVideoExpanded(true);
                          setCurrentVideoIndex(0);
                        }}
                        className="text-sm font-medium text-black tracking-wider cursor-pointer"
                      >
                        THE DINING ROOM
                      </button>
                      <button 
                        onClick={() => {
                          setIsVideoVisible(true);
                          setIsVideoExpanded(true);
                          setCurrentVideoIndex(0);
                        }}
                        className="text-gray-400 hover:text-blue-600 transition-colors"
                      >
                        <Info className="w-4 h-4" />
                      </button>
                    </div>
                    <div className="flex gap-2 overflow-x-auto pb-2">
                      {filteredMainDiningSlots.map((time) => (
                        <button
                          key={`main-${time}`}
                          onClick={() => handleTimeSelection(time, 'main')}
                          className="flex-shrink-0 px-4 py-3 rounded-lg font-medium transition-all w-32 text-base bg-gray-100 text-black hover:bg-gray-200 border-2 border-transparent"
                          style={isTimeSelected(time, 'main') ? { borderColor: 'black', backgroundColor: 'white' } : {}}
                        >
                          <div className="text-sm">{time}</div>
                        </button>
                      ))}
                      {/* Alert Me Button */}
                      <button 
                        onClick={() => setShowAlertModal(true)}
                        className="flex-shrink-0 px-4 py-3 rounded-lg font-medium transition-all w-32 text-base bg-gray-100 text-black hover:bg-gray-200 flex items-center justify-center gap-1"
                      >
                        <Bell className="w-4 h-4" />
                        <div className="text-sm">ALERT ME</div>
                      </button>
                    </div>
                  </div>
                )}

                {partySize === '7+' && (
                  <div className="mb-6">
                    <div className="flex items-center gap-2 mb-2">
                      <button 
                        onClick={() => {
                          setIsVideoVisible(true);
                          setIsVideoExpanded(true);
                          setCurrentVideoIndex(1);
                        }}
                        className="text-sm font-medium text-black tracking-wider cursor-pointer"
                      >
                        THE PASTA ROOM
                      </button>
                      <button 
                        onClick={() => {
                          setIsVideoVisible(true);
                          setIsVideoExpanded(true);
                          setCurrentVideoIndex(1);
                        }}
                        className="text-gray-400 hover:text-blue-600 transition-colors"
                      >
                        <Info className="w-4 h-4" />
                      </button>
                    </div>
                    <div className="text-sm text-black leading-relaxed mb-3">
                      The Pasta Room emanates Italian soul and warmth, serving as the very heart of our daily pasta production. Enjoy our delightful seasonal six-course menu priced at £120 per person.
                    </div>
                  </div>
                )}

                {/* Time Selection - Third Option - The Bar */}
                {partySize !== '7+' && parseInt(partySize) <= 4 && filteredBarExpressSlots.length > 0 && (
                  <div className="mb-6">
                    <div className="flex items-center gap-2 mb-2">
                      <button 
                        onClick={() => {
                          setIsVideoVisible(true);
                          setIsVideoExpanded(true);
                          setCurrentVideoIndex(1);
                        }}
                        className="text-sm font-medium text-black tracking-wider cursor-pointer"
                      >
                        THE BAR
                      </button>
                      <button 
                        onClick={() => {
                          setIsVideoVisible(true);
                          setIsVideoExpanded(true);
                          setCurrentVideoIndex(1);
                        }}
                        className="text-gray-400 hover:text-blue-600 transition-colors"
                      >
                        <Info className="w-4 h-4" />
                      </button>
                    </div>
                    <div className="flex gap-2 overflow-x-auto pb-2">
                      {filteredBarExpressSlots.map((time) => (
                        <button
                          key={`bar-${time}`}
                          onClick={() => handleTimeSelection(time, 'bar')}
                          className="flex-shrink-0 px-4 py-3 rounded-lg font-medium transition-all w-32 text-base bg-gray-100 text-black hover:bg-gray-200 border-2 border-transparent"
                          style={isTimeSelected(time, 'bar') ? { borderColor: 'black', backgroundColor: 'white' } : {}}
                        >
                          <div className="text-sm">{time}</div>
                        </button>
                      ))}
                      {/* Alert Me Button */}
                      <button 
                        onClick={() => setShowAlertModal(true)}
                        className="flex-shrink-0 px-4 py-3 rounded-lg font-medium transition-all w-32 text-base bg-gray-100 text-black hover:bg-gray-200 flex items-center justify-center gap-1"
                      >
                        <Bell className="w-4 h-4" />
                        <div className="text-sm">ALERT ME</div>
                      </button>
                    </div>
                  </div>
                )}

                {/* No tables available message */}
                {partySize !== '7+' && filterTime && filteredMainDiningSlots.length === 0 && (parseInt(partySize) > 4 || filteredBarExpressSlots.length === 0) && (
                  <div className="mb-6 text-center py-8">
                    <p className="text-base text-black mb-4">
                      Sorry, we don't have any tables within 2 hours of {filterTime}.
                    </p>
                    <button 
                      onClick={() => {
                        // Auto-populate the Priority Alert form with selected date and time
                        if (selectedDate) {
                          setAlertDate(selectedDate);
                        }
                        if (filterTime) {
                          setAlertStartTime(filterTime);
                        }
                        if (partySize && partySize !== '7+') {
                          setAlertPartySize(partySize);
                        }
                        setShowAlertModal(true);
                      }}
                      className="px-6 py-3 bg-gray-100 text-black rounded-lg hover:bg-gray-200 transition-all font-medium text-sm inline-flex items-center gap-2"
                    >
                      <Bell className="w-4 h-4" />
                      ALERT ME
                    </button>
                  </div>
                )}

                {/* Continue Button / Request Button */}
                {partySize === '7+' ? (
                  <a 
                    href="https://lucarestaurant.tripleseat.com/party_request/24975"
                    target="_blank"
                    rel="noopener noreferrer"
                    style={{ backgroundColor: '#2c3f2f' }}
                    className="w-full hover:opacity-90 text-white font-medium py-3 rounded-lg transition-all mb-4 text-base tracking-wide block text-center"
                  >
                    CHECK AVAILABILITY
                  </a>
                ) : (
                  <button 
                    onClick={handleContinueBooking}
                    disabled={!selectedDate || !selectedTime}
                    style={{ 
                      backgroundColor: !selectedDate || !selectedTime ? '#6b7d6b' : '#2c3f2f',
                      cursor: !selectedDate || !selectedTime ? 'not-allowed' : 'pointer',
                      opacity: !selectedDate || !selectedTime ? 0.6 : 1
                    }}
                    className="w-full text-white font-medium py-3 rounded-lg transition-all mb-4 text-base tracking-wide"
                  >
                    CONTINUE TO BOOK
                  </button>
                )}
              </div>

              {/* Custom Calendar Modal */}
              {showCalendar && (
                <CustomCalendar 
                  selectedDate={selectedDate}
                  onSelectDate={setSelectedDate}
                  onClose={() => setShowCalendar(false)}
                  getNextDays={getNextDays}
                />
              )}

              {/* Picture-in-Picture Video */}
              {isVideoVisible && !showBookingModal && !showWhatsNew && !showConfirmation && (
                <div 
                  className={`fixed transition-all duration-300 z-50 ${
                    isVideoExpanded 
                      ? 'inset-0' 
                      : 'bottom-4 right-4 w-40 h-72 rounded-lg'
                  }`}
                >
                  <div className={`relative w-full h-full bg-black overflow-hidden shadow-xl ${
                    isVideoExpanded 
                      ? '' 
                      : 'rounded-lg border border-gray-300'
                  }`}>
                    <video
                      ref={videoRef}
                      key={safeVideoIndex}
                      className="w-full h-full object-cover cursor-pointer"
                      autoPlay
                      muted={isVideoMuted}
                      loop
                      playsInline
                      onClick={(e) => {
                        e.stopPropagation();
                        if (!isVideoExpanded) {
                          toggleVideoSize();
                        }
                      }}
                      onError={(e) => {
                        console.error('Video failed to load:', currentVideo.src);
                        console.error('Error details:', e);
                      }}
                      onLoadedData={() => {
                        console.log('Video loaded successfully:', currentVideo.src);
                      }}
                    >
                      <source src={currentVideo.src} type="video/mp4" />
                      <img 
                        src="https://images.unsplash.com/photo-1589302168068-964664d93dc0?w=400&h=300&fit=crop"
                        alt="Truffle Menu presentation"
                        className="w-full h-full object-cover"
                      />
                    </video>
                    
                    {/* Expanded Video Overlay Content */}
                    {isVideoExpanded && (
                      <div 
                        className={`absolute inset-0 transition-all duration-300 pointer-events-none ${
                          isDescriptionExpanded 
                            ? 'bg-gradient-to-t from-black/90 via-black/60 to-black/50' 
                            : 'bg-gradient-to-t from-black/60 via-transparent to-black/30'
                        }`} 
                        style={{ zIndex: 2 }}
                      >
                        {/* Header */}
                        <div className="absolute top-0 left-0 right-0 p-6 pointer-events-auto">
                          <div className="flex items-center justify-end">
                            <button
                              onClick={toggleVideoSize}
                              className="w-12 h-12 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all"
                            >
                              <Minimize2 className="w-6 h-6 text-white" />
                            </button>
                          </div>
                        </div>


                        {/* Side Controls - Navigation Arrows */}
                        <div className="absolute right-4 transform -translate-y-1/2 flex flex-col gap-3 pointer-events-auto" style={{ zIndex: 10, top: '40%' }}>
                          {/* Navigation Up */}
                          <button
                            onClick={() => navigateVideo('up')}
                            disabled={currentVideoIndex === 0}
                            className={`w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center transition-all backdrop-blur-sm ${
                              currentVideoIndex === 0 
                                ? 'opacity-50 cursor-not-allowed' 
                                : 'hover:bg-opacity-30'
                            }`}
                          >
                            <ChevronUp className="w-6 h-6 text-white" />
                          </button>

                          {/* Navigation Down */}
                          <button
                            onClick={() => navigateVideo('down')}
                            disabled={currentVideoIndex === videos.length - 1}
                            className={`w-12 h-12 bg-white bg-opacity-20 rounded-lg flex items-center justify-center transition-all backdrop-blur-sm ${
                              currentVideoIndex === videos.length - 1 
                                ? 'opacity-50 cursor-not-allowed' 
                                : 'hover:bg-opacity-30'
                            }`}
                          >
                            <ChevronDown className="w-6 h-6 text-white" />
                          </button>
                        </div>

                        {/* Volume Control - 50% from top, 16px from right */}
                        <div className="absolute pointer-events-auto" style={{ top: '50%', right: '16px', zIndex: 10 }}>
                          <button
                            onClick={toggleVolume}
                            className="w-12 h-12 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all"
                          >
                            {isVideoMuted ? (
                              <VolumeX className="w-6 h-6 text-white" />
                            ) : (
                              <Volume2 className="w-6 h-6 text-white" />
                            )}
                          </button>
                        </div>

                        {/* Bottom Content */}
                        <div className="absolute bottom-0 left-0 right-0 p-6 pointer-events-auto">
                          {/* Title and Price - Only show for Chef's Menu */}
                          {currentVideoIndex === 0 && (
                            <div className="flex items-baseline justify-between gap-4 mb-3">
                              <h1 className="font-semibold text-white leading-tight text-[20px]">
                                {currentVideo.title}
                              </h1>
                              <span className="font-semibold text-white whitespace-nowrap text-[20px]">
                                £95 / person
                              </span>
                            </div>
                          )}
                          
                          {/* Title only for other dining areas */}
                          {currentVideoIndex !== 0 && (
                            <h1 className="font-semibold text-white leading-tight text-[20px] mb-3">
                              {currentVideo.title}
                            </h1>
                          )}
                          
                          <div className="mb-4">
                            <button 
                              onClick={() => setIsDescriptionExpanded(!isDescriptionExpanded)}
                              className="text-left w-full"
                            >
                              <p className={`text-white text-sm leading-relaxed ${
                                isDescriptionExpanded 
                                  ? '' 
                                  : 'overflow-hidden text-ellipsis whitespace-nowrap'
                              }`}>
                                {isDescriptionExpanded ? currentVideo.description : currentVideo.shortDescription}
                              </p>
                              {!isDescriptionExpanded && currentVideo.description !== currentVideo.shortDescription && (
                                <span className="text-white text-xs opacity-70 mt-1 inline-block">
                                  Tap to read more
                                </span>
                              )}
                            </button>
                          </div>

                          {/* Quick Date and Time Selection - Only for regular dining (not private dining) */}
                          {partySize !== '7+' && (
                            <>
                              {/* Quick Date Selection */}
                              <div className="mb-3">
                                <div className="flex gap-2 overflow-x-auto pb-1">
                                  {getNextDays().slice(0, 5).map((date, index) => (
                                    <button
                                      key={index}
                                      onClick={() => setSelectedDate(date)}
                                      className={`flex-shrink-0 px-3 py-2 rounded-lg font-medium transition-all text-xs text-black ${
                                        isDateSelected(date)
                                          ? 'bg-gray-400'
                                          : 'bg-white hover:bg-gray-50'
                                      }`}
                                    >
                                      {formatDate(date)}
                                    </button>
                                  ))}
                                </div>
                              </div>

                              {/* Quick Time Selection */}
                              <div className="mb-4">
                                <div className="flex gap-2 overflow-x-auto pb-1">
                                  {(() => {
                                    // Determine which time slots to show based on current video
                                    let slots, type;
                                    if (currentVideoIndex === 0) {
                                      slots = filteredMainDiningSlots;
                                      type = 'main';
                                    } else {
                                      slots = filteredBarExpressSlots;
                                      type = 'bar';
                                    }
                                    
                                    return slots.map((time) => (
                                      <button
                                        key={time}
                                        onClick={() => handleTimeSelection(time, type)}
                                        className={`flex-shrink-0 px-3 py-2 rounded-lg font-medium transition-all text-xs text-black ${
                                          isTimeSelected(time, type)
                                            ? 'bg-gray-400'
                                            : 'bg-white hover:bg-gray-50'
                                        }`}
                                      >
                                        {time}
                                      </button>
                                    ));
                                  })()}
                                </div>
                              </div>
                            </>
                          )}
                          
                          {/* No slots available message in fullscreen */}
                          {partySize !== '7+' && filterTime && (() => {
                            let slots;
                            if (currentVideoIndex === 0) {
                              slots = filteredMainDiningSlots;
                            } else {
                              slots = filteredBarExpressSlots;
                            }
                            
                            if (slots.length === 0) {
                              return (
                                <div className="mb-4 text-center py-4">
                                  <p className="text-sm text-white">
                                    No tables available within 2 hours of {filterTime}
                                  </p>
                                </div>
                              );
                            }
                            return null;
                          })()}
                          
                          {/* Controls */}
                          <div className="flex items-center justify-end">
                            {partySize === '7+' ? (
                              <a 
                                href="https://lucarestaurant.tripleseat.com/party_request/24975"
                                target="_blank"
                                rel="noopener noreferrer"
                                style={{ backgroundColor: '#2c3f2f', color: 'white', border: '2px solid white' }}
                                className="px-6 py-3 rounded-lg font-medium text-sm hover:opacity-90 transition-all inline-block"
                              >
                                CHECK AVAILABILITY
                              </a>
                            ) : (
                              <button 
                                onClick={handleContinueBooking}
                                disabled={!selectedDate || !selectedTime}
                                style={{ 
                                  backgroundColor: !selectedDate || !selectedTime ? '#6b7d6b' : '#2c3f2f', 
                                  color: 'white', 
                                  border: '2px solid white',
                                  cursor: !selectedDate || !selectedTime ? 'not-allowed' : 'pointer',
                                  opacity: !selectedDate || !selectedTime ? 0.6 : 1
                                }}
                                className="px-6 py-3 rounded-lg font-medium text-sm transition-all"
                              >
                                BOOK NOW
                              </button>
                            )}
                          </div>
                        </div>
                      </div>
                    )}
                    
                    {/* Small Video Controls */}
                    {!isVideoExpanded && (
                      <>
                        {/* X button in top-right corner */}
                        <button
                          onClick={(e) => {
                            e.stopPropagation();
                            closeVideo();
                          }}
                          className="absolute top-1 right-1 w-6 h-6 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all z-10"
                        >
                          <X className="w-3 h-3 text-white" />
                        </button>
                        
                        <div 
                          className="absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all duration-200 cursor-pointer"
                          onClick={(e) => {
                            e.stopPropagation();
                            // Only expand if clicking the overlay itself, not the buttons
                            if (e.target === e.currentTarget) {
                              toggleVideoSize();
                            }
                          }}
                        >
                          <div className="absolute bottom-1 left-1 right-1 flex justify-between items-center">
                            <button
                              onClick={(e) => {
                                e.stopPropagation();
                                toggleVideoSize();
                              }}
                              className="w-6 h-6 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all"
                            >
                              <Maximize2 className="w-3 h-3 text-white" />
                            </button>
                            
                            <button
                              onClick={(e) => {
                                e.stopPropagation();
                                toggleVolume();
                              }}
                              className="w-6 h-6 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all"
                            >
                              {isVideoMuted ? (
                                <VolumeX className="w-3 h-3 text-white" />
                              ) : (
                                <Volume2 className="w-3 h-3 text-white" />
                              )}
                            </button>
                          </div>
                        </div>
                      </>
                    )}
                    
                    {/* Video Label */}
                    {!isVideoExpanded && (
                      <div className="absolute top-0.5 left-0.5 right-0.5">
                        <div className="text-xs text-white bg-black bg-opacity-50 px-1 py-0.5 rounded text-center">
                          {currentVideo.title}
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              )}

              {/* Overlay when video is expanded */}
              {isVideoExpanded && !showBookingModal && !showWhatsNew && (
                <div 
                  className="fixed inset-0 bg-black bg-opacity-75 z-40"
                  onClick={toggleVideoSize}
                />
              )}

              {/* Chef's Menu - Upgrades Screen */}
              {showWhatsNew && (
                <div className="fixed inset-0 bg-black z-60 overflow-hidden flex flex-col">
                  {/* Video Section - Flexible Height */}
                  <div className="relative flex-1 bg-black pt-8 pb-3 px-3 flex items-center justify-center" style={{ minHeight: 0 }}>
                    {/* Back Button - Top Left of Screen */}
                    <button 
                      onClick={() => setShowWhatsNew(false)}
                      className="absolute top-4 left-4 w-12 h-12 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all z-10"
                    >
                      <ChevronLeft className="w-6 h-6 text-white" />
                    </button>

                    {/* Expand Video Button - Top Right of Screen */}
                    <button 
                      onClick={() => setUpgradeVideoPlaying('chefsMenu')}
                      className="absolute top-4 right-4 w-12 h-12 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all z-10"
                    >
                      <Maximize2 className="w-6 h-6 text-white" />
                    </button>

                    {/* Volume Control - Bottom Right Corner of Video */}
                    <button
                      onClick={toggleVolume}
                      className="absolute bottom-4 right-4 w-12 h-12 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all z-10"
                    >
                      {isVideoMuted ? (
                        <VolumeX className="w-6 h-6 text-white" />
                      ) : (
                        <Volume2 className="w-6 h-6 text-white" />
                      )}
                    </button>

                    {/* Portrait Video Container - Centered, Responsive */}
                    <div 
                      className="relative mx-auto cursor-pointer overflow-hidden rounded-3xl shadow-2xl" 
                      style={{ 
                        width: 'auto',
                        maxWidth: 'min(100%, 360px)',
                        maxHeight: '100%',
                        aspectRatio: '9 / 16'
                      }} 
                      onClick={() => setUpgradeVideoPlaying('chefsMenu')}
                    >
                      <video 
                        ref={upgradePipRef}
                        src={upgradeVideoSources.chefsMenu}
                        className="w-full h-full object-cover"
                        autoPlay
                        loop
                        muted={isVideoMuted}
                        playsInline
                      />
                    </div>
                  </div>

                  {/* Fixed Footer with All Content - Always Visible */}
                  <div className="flex-shrink-0 bg-white relative">
                    {/* Chef's Menu Upgrade - For Dining Room and Bar */}
                    {(selectedTimeType === 'main' || selectedTimeType === 'bar') && (
                      <div className="px-6 pt-5 pb-4">
                        {/* Subtitle */}
                        <div className="mb-2">
                          <span className="text-gray-600 leading-relaxed text-[15px]">
                            Treat your party to a special experience
                          </span>
                        </div>
                        
                        {/* Title and Price on Same Line */}
                        <div className="flex items-baseline justify-between gap-4 mb-3">
                          <h1 className="font-semibold text-black leading-tight text-[20px]">
                            Chef's Menu
                          </h1>
                          
                          <span className="font-semibold text-black whitespace-nowrap text-[20px]">
                            £95 / person
                          </span>
                        </div>
                        
                        {/* Description */}
                        <p className="text-black leading-relaxed mb-4 text-[15px]">
                          Chef Ferragosto curates an exciting four course seasonal menu inspired by the Italian coast, to be shared by the table.
                        </p>

                        {/* CTA Buttons */}
                        <div className="space-y-2.5 mb-4">
                          {/* Add to Cart Button - Green */}
                          <button 
                            onClick={() => {
                              setUpgrades(prev => ({
                                ...prev,
                                chefsMenu: { ...prev.chefsMenu, quantity: parseInt(partySize) || 1 }
                              }));
                              setCameFromWhatsNew(true);
                              setShowWhatsNew(false);
                              setShowBookingModal(true);
                            }}
                            style={{ backgroundColor: '#2c3f2f' }}
                            className="w-full px-4 py-3 text-white rounded-lg hover:opacity-90 transition-all font-medium text-[15px] tracking-wide"
                          >
                            ADD TO CART
                          </button>

                          {/* Skip Button - Gray background */}
                          <button 
                            onClick={() => {
                              setCameFromWhatsNew(true);
                              setShowWhatsNew(false);
                              setShowBookingModal(true);
                            }}
                            className="w-full px-4 py-3 bg-gray-100 text-black rounded-lg hover:bg-gray-200 transition-all font-medium text-[13px] tracking-wide uppercase"
                          >
                            SKIP
                          </button>
                        </div>

                        {/* Cancellation Policy Link */}
                        <div className="flex items-center gap-2">
                          <button
                            onClick={() => setPolicyModal({
                              isOpen: true,
                              title: 'Cancellation Policy',
                              content: 'We operate a 24 hours cancellation policy of £30 per person for all bookings.\n\nLarger parties and private dining room reservations are subject to a different cancellation policy which is mentioned at the time of the booking.'
                            })}
                            className="text-[13px] text-black hover:text-gray-600 transition-colors"
                          >
                            Cancellation Policy
                          </button>
                          <button
                            onClick={() => setPolicyModal({
                              isOpen: true,
                              title: 'Cancellation Policy',
                              content: 'We operate a 24 hours cancellation policy of £30 per person for all bookings.\n\nLarger parties and private dining room reservations are subject to a different cancellation policy which is mentioned at the time of the booking.'
                            })}
                            className="text-gray-400 hover:text-blue-600 transition-colors"
                          >
                            <Info className="w-4 h-4" />
                          </button>
                        </div>
                      </div>
                    )}
                  </div>
                </div>
              )}

              {/* Full Screen Video Modal for Upgrades */}
              {upgradeVideoPlaying && (
                <div className="fixed inset-0 bg-black z-70">
                  <div className="relative w-full h-full flex items-center justify-center">
                    {/* Video */}
                    <video 
                      ref={upgradeVideoRef}
                      src={upgradeVideoSources[upgradeVideoPlaying]}
                      className="w-full h-full object-cover"
                      autoPlay
                      loop
                      playsInline
                      muted={isVideoMuted}
                      onClick={(e) => {
                        e.stopPropagation();
                        if (upgradeVideoRef.current) {
                          if (upgradeVideoRef.current.paused) {
                            upgradeVideoRef.current.play();
                          } else {
                            upgradeVideoRef.current.pause();
                          }
                        }
                      }}
                    />
                    
                    {/* Video Title Overlay */}
                    {upgradeVideoPlaying === 'chefsMenu' && (
                      <div className="absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/60 to-transparent pt-6 pb-12">
                        <h2 className="text-white text-2xl font-semibold text-left px-6">
                          Chef's Menu
                        </h2>
                      </div>
                    )}
                    {upgradeVideoPlaying === 'winePairing' && (
                      <div className="absolute top-0 left-0 right-0 z-10 bg-gradient-to-b from-black/60 to-transparent pt-6 pb-12">
                        <h2 className="text-white text-2xl font-semibold text-left px-6">
                          Chef's Wine Pairing
                        </h2>
                      </div>
                    )}
                    
                    {/* Close Button - Top Right */}
                    <button 
                      onClick={() => setUpgradeVideoPlaying(null)}
                      className="absolute top-4 right-4 w-12 h-12 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all z-10"
                    >
                      <X className="w-6 h-6 text-white" />
                    </button>
                    
                    {/* Volume Control - Bottom Right */}
                    <button
                      onClick={toggleVolume}
                      className="absolute bottom-4 right-4 w-12 h-12 bg-black bg-opacity-50 rounded-full flex items-center justify-center hover:bg-opacity-70 transition-all z-10"
                    >
                      {isVideoMuted ? (
                        <VolumeX className="w-6 h-6 text-white" />
                      ) : (
                        <Volume2 className="w-6 h-6 text-white" />
                      )}
                    </button>
                    
                  </div>
                </div>
              )}

              {/* Booking Completion Form */}
              {showBookingModal && (
                <div className="fixed inset-0 bg-white z-60 overflow-y-auto">
                  {/* Sticky Header with Logo, Summary, and Timer */}
                  <div className="sticky top-0 bg-white z-20 shadow-sm">
                    <div className="w-full max-w-md mx-auto px-4 pt-3 pb-1 relative">
                      {/* Back Arrow - Top Left */}
                      <button 
                        onClick={() => {
                          setShowBookingModal(false);
                          if (cameFromWhatsNew) {
                            setShowWhatsNew(true);
                          }
                          // If not from What's New, just close the modal (goes back to main page)
                        }}
                        className="absolute left-4 top-4 w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 transition-all z-10"
                      >
                        <ChevronLeft className="w-5 h-5 text-black" />
                      </button>

                      {/* Close X Button - Top Right */}
                      <button 
                        onClick={() => setShowBookingModal(false)}
                        className="absolute right-4 top-4 w-8 h-8 rounded-full flex items-center justify-center hover:bg-gray-100 transition-all z-10"
                      >
                        <X className="w-5 h-5 text-black" />
                      </button>

                      {/* Logo Section */}
                      <div className="flex justify-center mb-2">
                        <img 
                          src="luca-logo.jpg" 
                          alt="Luca Restaurant" 
                          className="h-12 w-auto object-contain max-w-full"
                          onError={(e) => {
                            console.log('Logo failed to load, showing text fallback');
                            e.target.style.display = 'none';
                            e.target.nextSibling.style.display = 'block';
                          }}
                          onLoad={(e) => {
                            console.log('Logo loaded successfully');
                          }}
                        />
                        <div className="text-xl font-bold tracking-wider text-black" style={{display: 'none'}}>
                          LUCA
                        </div>
                      </div>

                      {/* Countdown Timer */}
                      <div className="flex items-start justify-center gap-2 px-4 mb-2">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" className="flex-shrink-0 mt-0.5" style={timeRemaining === 0 ? { color: '#9f1f0d' } : { color: '#000000' }}>
                          <circle cx="12" cy="12" r="10"></circle>
                          <polyline points="12,6 12,12 16,14"></polyline>
                        </svg>
                        {timeRemaining > 0 ? (
                          <span className="text-[14px] text-black whitespace-nowrap">{formatTimeRemaining(timeRemaining)}</span>
                        ) : (
                          <span className="text-[14px] leading-tight text-center" style={{ color: '#9f1f0d' }}>
                            Your table is no longer being held, but you can still try to book it.
                          </span>
                        )}
                      </div>

                      {/* Booking Summary */}
                      <div className="mb-2">
                        <div className="flex items-center justify-center gap-2 text-[14px] text-black">
                          <span>{selectedDate ? formatDate(selectedDate) : 'Select date'}</span>
                          <span>•</span>
                          <span>{selectedTime || 'Select time'}</span>
                          <span>•</span>
                          <span>{partySize} {partySize === 1 ? 'guest' : 'guests'}</span>
                        </div>
                      </div>

                      {/* Seating Area Title with Price */}
                      <div className="mb-2 flex items-center justify-center gap-2 text-[14px] text-black">
                        <span>
                          {selectedTimeType === 'main' ? 'The Dining Room' : 'The Bar'}
                        </span>
                      </div>

                      {/* Upgrades with Price and Remove links */}
                      {upgrades.chefsMenu && upgrades.chefsMenu.quantity > 0 && (
                        <div className="mb-2 flex items-center justify-center gap-2 text-[14px] text-black">
                          <span>Chef's Menu</span>
                          <span>({upgrades.chefsMenu.quantity} x £95)</span>
                          <button
                            onClick={() => setUpgrades(prev => ({
                              ...prev,
                              chefsMenu: { ...prev.chefsMenu, quantity: 0 }
                            }))}
                            className="text-[13px] text-gray-400 underline hover:text-gray-600 transition-colors"
                          >
                            Remove
                          </button>
                        </div>
                      )}
                      {upgrades.winePairing && upgrades.winePairing.quantity > 0 && (
                        <div className="mb-2 flex items-center justify-center gap-2 text-[14px] text-black">
                          <span>Chef's Wine Pairing</span>
                          <span>({upgrades.winePairing.quantity} x £125)</span>
                          <button
                            onClick={() => setUpgrades(prev => ({
                              ...prev,
                              winePairing: { ...prev.winePairing, quantity: 0 }
                            }))}
                            className="text-[13px] text-gray-400 underline hover:text-gray-600 transition-colors"
                          >
                            Remove
                          </button>
                        </div>
                      )}
                    </div>
                  </div>

                  {/* Scrollable Content */}
                  <div className="w-full max-w-md mx-auto px-4 pb-8">
                    <p className="text-[15px] text-black mb-4 mt-4">Select an option below to continue</p>
                    
                    {/* Social Login Options */}
                    <div className="mb-6">
                      {/* Google Sign In */}
                      <button className="w-3/4 mx-auto p-3 border-2 border-gray-300 rounded-lg mb-3 flex items-center justify-between hover:bg-gray-50 transition-colors">
                        <div className="flex items-center gap-2">
                          <div className="w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center">
                            <svg width="14" height="14" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                              <path d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.875 2.684-6.615z" fill="#4285F4"/>
                              <path d="M9.003 18c2.43 0 4.467-.806 5.956-2.184l-2.908-2.258c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.96v2.332C2.44 15.983 5.485 18 9.003 18z" fill="#34A853"/>
                              <path d="M3.964 10.712c-.18-.54-.282-1.117-.282-1.71 0-.593.102-1.17.282-1.71V4.96H.957C.347 6.175 0 7.55 0 9.002c0 1.452.348 2.827.957 4.042l3.007-2.332z" fill="#FBBC05"/>
                              <path d="M9.003 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.464.891 11.426 0 9.003 0 5.485 0 2.44 2.017.96 4.958L3.967 7.29c.708-2.127 2.692-3.71 5.036-3.71z" fill="#EA4335"/>
                            </svg>
                          </div>
                          <div className="text-left">
                            <div className="text-[15px] font-semibold text-black">Sign in with Google</div>
                          </div>
                        </div>
                        <svg className="w-3 h-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                        </svg>
                      </button>

                      {/* Facebook Login */}
                      <button className="w-3/4 mx-auto p-3 rounded-lg mb-4 flex items-center justify-center gap-2 transition-colors" style={{ backgroundColor: '#1877F2' }}>
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                          <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                        </svg>
                        <span className="text-white font-semibold text-[15px] tracking-wide">LOGIN WITH FACEBOOK</span>
                      </button>

                      {/* Divider */}
                      <div className="relative mb-6">
                        <div className="absolute inset-0 flex items-center">
                          <div className="w-full border-t border-gray-300"></div>
                        </div>
                        <div className="relative flex justify-start text-[15px]">
                          <span className="pr-4 bg-white text-black">Or continue as a guest</span>
                        </div>
                      </div>
                    </div>
                    
                    {/* Name Fields */}
                    <div className="grid grid-cols-2 gap-4 mb-4">
                      <div>
                        <label className="block text-[15px] text-black mb-1">First name*</label>
                        <input 
                          type="text" 
                          placeholder="First Name"
                          value={firstName}
                          onChange={(e) => setFirstName(e.target.value)}
                          className={`w-full p-3 border-b-2 ${showFieldErrors && !firstName ? 'border-red-600' : 'border-gray-200'} focus:border-blue-600 outline-none text-[15px]`}
                        />
                        {showFieldErrors && !firstName && (
                          <p className="text-sm text-red-600 mt-1" style={{ color: '#dc2626' }}>Required</p>
                        )}
                      </div>
                      <div>
                        <label className="block text-[15px] text-black mb-1">Last name*</label>
                        <input 
                          type="text" 
                          placeholder="Last Name"
                          value={lastName}
                          onChange={(e) => setLastName(e.target.value)}
                          className={`w-full p-3 border-b-2 ${showFieldErrors && !lastName ? 'border-red-600' : 'border-gray-200'} focus:border-blue-600 outline-none text-[15px]`}
                        />
                        {showFieldErrors && !lastName && (
                          <p className="text-sm text-red-600 mt-1" style={{ color: '#dc2626' }}>Required</p>
                        )}
                      </div>
                    </div>

                    {/* Email Address */}
                    <div className="mb-4">
                      <label className="block text-[15px] text-black mb-1">Email Address*</label>
                      <input 
                        type="email" 
                        placeholder="Email Address"
                        value={email}
                        onChange={(e) => setEmail(e.target.value)}
                        className={`w-full p-3 border-b-2 ${showFieldErrors && !email ? 'border-red-600' : 'border-gray-200'} focus:border-blue-600 outline-none text-[15px]`}
                      />
                      {showFieldErrors && !email && (
                        <p className="text-sm text-red-600 mt-1" style={{ color: '#dc2626' }}>Required</p>
                      )}
                    </div>

                    {/* Phone Number */}
                    <div className="mb-4">
                      <label className="block text-[15px] text-black mb-1">Phone Number*</label>
                      <div className={`flex items-center border-b-2 ${showFieldErrors && !phoneNumber ? 'border-red-600' : 'border-gray-200'} focus-within:border-blue-600`}>
                        <select 
                          className="p-3 outline-none text-[15px] border-none bg-transparent pr-8"
                          style={{
                            appearance: 'none',
                            WebkitAppearance: 'none',
                            MozAppearance: 'none',
                            backgroundImage: 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'16\' height=\'16\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'%23000000\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'%3E%3Cpolyline points=\'6 9 12 15 18 9\'%3E%3C/polyline%3E%3C/svg%3E")',
                            backgroundRepeat: 'no-repeat',
                            backgroundPosition: 'right 8px center',
                            backgroundSize: '16px'
                          }}
                        >
                          <option value="+44">🇬🇧 +44</option>
                          <option value="+1">🇺🇸 +1</option>
                          <option value="+33">🇫🇷 +33</option>
                          <option value="+49">🇩🇪 +49</option>
                          <option value="+39">🇮🇹 +39</option>
                          <option value="+34">🇪🇸 +34</option>
                        </select>
                        <input 
                          type="tel" 
                          placeholder="Phone Number"
                          value={phoneNumber}
                          onChange={(e) => setPhoneNumber(e.target.value)}
                          className="flex-1 p-3 outline-none text-[15px] border-none"
                        />
                      </div>
                      {showFieldErrors && !phoneNumber && (
                        <p className="text-sm text-red-600 mt-1" style={{ color: '#dc2626' }}>Required</p>
                      )}
                    </div>

                    {/* Birthday */}
                    <div className="grid grid-cols-2 gap-4 mb-4">
                      <div>
                        <label className="block text-[15px] text-black mb-1">Birthday</label>
                        <input 
                          type="text" 
                          placeholder="MM / DD"
                          maxLength="5"
                          className="w-full p-3 border-b-2 border-gray-200 focus:border-blue-600 outline-none text-[15px]"
                        />
                      </div>
                      <div></div>
                    </div>

                    {/* Payment Section with Border */}
                    <div className="border border-gray-300 rounded-lg p-4 mb-6">
                      {/* Card Number with Credit Card Logos */}
                      <div className="mb-4">
                        <label className="block text-[15px] text-black mb-1">Card number</label>
                        <div className="relative">
                          <input 
                            type="text" 
                            placeholder="1234 1234 1234 1234"
                            className="w-full p-3 pr-40 border-b-2 border-gray-200 focus:border-blue-600 outline-none text-[15px]"
                          />
                          <div className="absolute right-2 top-1/2 transform -translate-y-1/2 flex gap-1">
                          {/* Visa */}
                          <svg width="32" height="20" viewBox="0 0 48 32" fill="none">
                            <rect width="48" height="32" rx="4" fill="#1434CB"/>
                            <path d="M19.8 22.5h-3.2l2-12.3h3.2l-2 12.3zm11.5-12c-.6-.2-1.6-.5-2.8-.5-3.1 0-5.3 1.6-5.3 3.9 0 1.7 1.5 2.6 2.7 3.2 1.2.6 1.6 1 1.6 1.5 0 .8-.9 1.1-1.8 1.1-1.2 0-1.8-.2-2.8-.6l-.4-.2-.4 2.5c.7.3 2.1.6 3.5.6 3.3 0 5.5-1.6 5.5-4.1 0-1.3-.8-2.3-2.6-3.1-1.1-.5-1.7-.9-1.7-1.4 0-.5.5-.9 1.7-.9.9 0 1.6.2 2.1.4l.3.1.4-2.5zm6.3-.3h-2.5c-.8 0-1.4.2-1.7 1l-4.9 11.6h3.3l.7-1.8h4.1l.4 1.8h2.9l-2.3-12.6zm-3.6 8.1c.2-.7 1.2-3.3 1.2-3.3l.7 3.3h-1.9zm-13.7-8.1l-3.1 8.4-.3-1.7c-.6-1.9-2.3-3.9-4.3-4.9l2.9 10.4h3.3l4.9-12.2h-3.4z" fill="white"/>
                          </svg>
                          {/* Mastercard */}
                          <svg width="32" height="20" viewBox="0 0 48 32" fill="none">
                            <rect width="48" height="32" rx="4" fill="#EB001B"/>
                            <circle cx="18" cy="16" r="10" fill="#FF5F00"/>
                            <circle cx="30" cy="16" r="10" fill="#F79E1B"/>
                          </svg>
                          {/* Amex */}
                          <svg width="32" height="20" viewBox="0 0 48 32" fill="none">
                            <rect width="48" height="32" rx="4" fill="#006FCF"/>
                            <path d="M15.5 13h-2.2l-1.1 2.6-1.1-2.6h-2.3l2.3 4.8v3.2h2v-3.2l2.4-4.8zm2.9 7.6c-.3.2-.8.4-1.4.4-.9 0-1.5-.6-1.5-1.5h4.2c0-.2 0-.4.1-.6 0-1.7-1-3.2-3.2-3.2-2 0-3.4 1.5-3.4 3.7 0 2.1 1.3 3.6 3.6 3.6 1 0 1.8-.3 2.3-.6l-.7-1.8zm-1.6-4.3c.7 0 1.1.5 1.1 1.2h-2.3c.1-.7.5-1.2 1.2-1.2z" fill="white"/>
                          </svg>
                          {/* Discover */}
                          <svg width="32" height="20" viewBox="0 0 48 32" fill="none">
                            <rect width="48" height="32" rx="4" fill="#FF6000"/>
                            <circle cx="38" cy="16" r="10" fill="#F90"/>
                          </svg>
                        </div>
                      </div>
                    </div>

                    {/* Expiration date and Security code */}
                    <div className="grid grid-cols-2 gap-4 mb-6">
                      <div>
                        <label className="block text-[15px] text-black mb-1">Expiration date</label>
                        <input 
                          type="text" 
                          placeholder="MM / YY"
                          className="w-full p-3 border-b-2 border-gray-200 focus:border-blue-600 outline-none text-[15px]"
                        />
                      </div>
                      <div>
                        <label className="block text-[15px] text-black mb-1">Security code</label>
                        <div className="relative">
                          <input 
                            type="text" 
                            placeholder="CVC"
                            maxLength="4"
                            className="w-full p-3 pr-12 border-b-2 border-gray-200 focus:border-blue-600 outline-none text-[15px]"
                          />
                          {/* CVC Helper Icon */}
                          <div className="absolute right-2 top-1/2 transform -translate-y-1/2">
                            <svg width="32" height="20" viewBox="0 0 48 32" fill="none">
                              <rect width="48" height="32" rx="4" fill="#E5E7EB" stroke="#D1D5DB"/>
                              <rect x="4" y="6" width="40" height="6" fill="#9CA3AF"/>
                              <rect x="28" y="18" width="16" height="8" rx="2" fill="white" stroke="#9CA3AF"/>
                              <text x="30" y="24" fontSize="8" fill="#6B7280" fontFamily="monospace">123</text>
                            </svg>
                          </div>
                        </div>
                      </div>
                    </div>

                    {/* Country and Postal Code */}
                    <div className="grid grid-cols-2 gap-4 mb-6">
                      <div>
                        <label className="block text-[15px] text-black mb-1">Country</label>
                        <select className="w-full p-3 border-b-2 border-gray-200 focus:border-blue-600 outline-none text-[15px] bg-transparent appearance-none">
                          <option value="GB" selected>United Kingdom</option>
                          <option value="US">United States</option>
                          <option value="CA">Canada</option>
                          <option value="FR">France</option>
                          <option value="DE">Germany</option>
                          <option value="IT">Italy</option>
                          <option value="ES">Spain</option>
                        </select>
                      </div>
                      <div>
                        <label className="block text-[15px] text-black mb-1">Postal Code</label>
                        <input 
                          type="text" 
                          placeholder="SW1A 1AA"
                          className="w-full p-3 border-b-2 border-gray-200 focus:border-blue-600 outline-none text-[15px]"
                        />
                      </div>
                    </div>

                    {/* Fine Print */}
                    <div className="mb-6">
                      <p className="text-[13px] text-black leading-relaxed">
                        By providing your card information, you allow St.Vibes LTD to charge your card for future payments in accordance with their terms.
                      </p>
                    </div>
                  </div>

                    {/* Payment Collected Today Section */}
                    <div className="mb-6">
                      <h3 className="text-[15px] font-semibold text-black mb-3">Payment Collected Today</h3>
                      
                      <div className="border border-gray-300 rounded-lg p-4">
                        {/* No payment required for any reservation type */}
                        <p className="text-[15px] text-gray-600">No payment required to confirm this reservation.</p>
                      </div>
                    </div>

                    {/* Special Requests Section */}
                    <div className="mb-6">
                      <h3 className="text-[15px] font-semibold text-black mb-3">
                        Preferences
                      </h3>
                      
                      <div className="border border-gray-300 rounded-lg divide-y divide-gray-300">
                        {/* Special Occasion */}
                        <div>
                          <button
                            type="button"
                            onClick={() => setExpandedSection(expandedSection === 'occasion' ? null : 'occasion')}
                            className="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left"
                          >
                            <span className="text-[15px] text-black text-left">Is this a Special Occasion?</span>
                            <Plus className={`w-5 h-5 text-black transition-transform ${expandedSection === 'occasion' ? 'rotate-45' : ''}`} />
                          </button>
                          {expandedSection === 'occasion' && (
                            <div className="px-4 pb-4">
                              <div className="flex flex-wrap gap-2 mb-4">
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Anniversary</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Birthday</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Celebration</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Engagement</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Graduation</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Honeymoon</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Special Event</button>
                              </div>
                              <button className="px-6 py-2 border-2 border-gray-300 rounded-lg text-[15px] text-gray-400 font-medium">SAVE</button>
                            </div>
                          )}
                        </div>

                        {/* Personal Dietary Restrictions */}
                        <div>
                          <button
                            type="button"
                            onClick={() => setExpandedSection(expandedSection === 'dietary' ? null : 'dietary')}
                            className="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left"
                          >
                            <span className="text-[15px] text-black text-left">Do you have any dietary restrictions?</span>
                            <Plus className={`w-5 h-5 text-black transition-transform ${expandedSection === 'dietary' ? 'rotate-45' : ''}`} />
                          </button>
                          {expandedSection === 'dietary' && (
                            <div className="px-4 pb-4">
                              <div className="flex flex-wrap gap-2 mb-4">
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Alcohol-Free</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Allergy</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Allium</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Celery</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Crustacean</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Dairy-Free</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Diabetic</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Eggs</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Fish</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Garlic</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Gluten-Free</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Halal</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Hazelnut</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Kosher</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Lactose Intolerant</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Lupin</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Milk</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Mushrooms</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Mustard</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Nightshade</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Nuts</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Paleo</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Peanuts</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Pescatarian</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Pork</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Poultry</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Pregnant</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Red Meat</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Salt</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Seafood</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Sesame</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Shellfish</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Shrimp</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Soy</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Sulfites</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Tomatoes</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Tree Nuts</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Vegan</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Vegetarian</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Walnuts</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Wheat</button>
                              </div>
                              <button className="px-6 py-2 border-2 border-gray-300 rounded-lg text-[15px] text-gray-400 font-medium">SAVE</button>
                            </div>
                          )}
                        </div>

                        {/* Party Dietary Restrictions */}
                        <div>
                          <button
                            type="button"
                            onClick={() => setExpandedSection(expandedSection === 'partyDietary' ? null : 'partyDietary')}
                            className="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left"
                          >
                            <span className="text-[15px] text-black text-left">Does your party have any dietary restrictions?</span>
                            <Plus className={`w-5 h-5 text-black transition-transform ${expandedSection === 'partyDietary' ? 'rotate-45' : ''}`} />
                          </button>
                          {expandedSection === 'partyDietary' && (
                            <div className="px-4 pb-4">
                              <div className="flex flex-wrap gap-2 mb-4">
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Alcohol-Free</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Allergy</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Allium</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Crustacean</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Dairy-Free</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Diabetic</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Eggs</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Fish</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Gluten-Free</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Halal</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Kosher</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Lactose Intolerant</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Mustard</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Nightshade</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Pescatarian</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Pregnant</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Shellfish</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Soy</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Sulfites</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Vegan</button>
                                <button className="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-[15px] text-black transition-colors">Vegetarian</button>
                              </div>
                              <button className="px-6 py-2 border-2 border-gray-300 rounded-lg text-[15px] text-gray-400 font-medium">SAVE</button>
                            </div>
                          )}
                        </div>

                        {/* Anything Else */}
                        <div>
                          <button
                            type="button"
                            onClick={() => setExpandedSection(expandedSection === 'other' ? null : 'other')}
                            className="w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors text-left"
                          >
                            <span className="text-[15px] text-black text-left">Anything else we should know?</span>
                            <Plus className={`w-5 h-5 text-black transition-transform ${expandedSection === 'other' ? 'rotate-45' : ''}`} />
                          </button>
                          {expandedSection === 'other' && (
                            <div className="px-4 pb-4">
                              <textarea
                                placeholder="Any other special requests or information..."
                                rows="3"
                                className="w-full p-3 border border-gray-300 rounded-lg focus:border-blue-600 focus:ring-1 focus:ring-blue-600 outline-none text-[15px] mb-4"
                              />
                              <button className="px-6 py-2 border-2 border-gray-300 rounded-lg text-[15px] text-gray-400 font-medium">SAVE</button>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>

                    {/* Checkboxes */}
                    <div className="space-y-4 mb-6">
                      {/* Cancellation Policy */}
                      <div>
                        <div className="flex items-start gap-3">
                          <input 
                            type="checkbox" 
                            className="mt-1 w-4 h-4 flex-shrink-0" 
                            checked={cancelPolicyChecked}
                            onChange={(e) => {
                              setCancelPolicyChecked(e.target.checked);
                              setShowCancelPolicyError(false);
                            }}
                          />
                          <div className="flex items-start gap-2 flex-1">
                            <span className="text-[15px] text-black">Cancellation Policy*</span>
                            <button 
                              type="button"
                              className="text-gray-400 hover:text-blue-600 transition-colors flex-shrink-0 mt-0.5"
                              onClick={() => setPolicyModal({
                                isOpen: true,
                                title: 'Cancellation Policy',
                                content: 'We operate a 24 hours cancellation policy of £30 per person for all bookings.\n\nLarger parties and private dining room reservations are subject to a different cancellation policy which is mentioned at the time of the booking.'
                              })}
                            >
                              <Info className="w-4 h-4" />
                            </button>
                          </div>
                        </div>
                        {showCancelPolicyError && (
                          <p className="text-sm text-red-600 mt-1 ml-7" style={{ color: '#dc2626' }}>Required</p>
                        )}
                      </div>
                      
                      {/* Receive news for Luca Restaurant */}
                      <div className="flex items-start gap-3">
                        <input type="checkbox" className="mt-1 w-4 h-4 flex-shrink-0" defaultChecked />
                        <div className="flex items-start gap-2 flex-1">
                          <span className="text-[15px] text-black">Receive news and offers for Luca Restaurant</span>
                          <button 
                            type="button"
                            className="text-gray-400 hover:text-blue-600 transition-colors flex-shrink-0 mt-0.5"
                            onClick={() => setPolicyModal({
                              isOpen: true,
                              title: 'Marketing Policy',
                              content: "From time to time, we'll contact you via email to keep you in the loop about what's happening at Luca Restaurant!"
                            })}
                          >
                            <Info className="w-4 h-4" />
                          </button>
                        </div>
                      </div>
                      
                      {/* Receive news for all locations */}
                      <div className="flex items-start gap-3">
                        <input type="checkbox" className="mt-1 w-4 h-4 flex-shrink-0" defaultChecked />
                        <div className="flex items-start gap-2 flex-1">
                          <span className="text-[15px] text-black">Receive news and offers for all our locations</span>
                          <button 
                            type="button"
                            className="text-gray-400 hover:text-blue-600 transition-colors flex-shrink-0 mt-0.5"
                            onClick={() => setPolicyModal({
                              isOpen: true,
                              title: 'Marketing Policy',
                              content: "From time to time, we'll contact you via email to keep you in the loop about what's happening at all existing and new locations. By clicking this, you will be resubscribed to any of our locations from which you previously unsubscribed."
                            })}
                          >
                            <Info className="w-4 h-4" />
                          </button>
                        </div>
                      </div>
                      
                      {/* SMS Updates */}
                      <div className="flex items-start gap-3">
                        <input type="checkbox" className="mt-1 w-4 h-4 flex-shrink-0" defaultChecked />
                        <div className="flex items-start gap-2 flex-1">
                          <span className="text-[15px] text-black">Yes, I'd like to receive text message updates related to this reservation such as reminders and confirmations at the number provided.</span>
                          <button 
                            type="button"
                            className="text-gray-400 hover:text-blue-600 transition-colors flex-shrink-0 mt-0.5"
                            onClick={() => setPolicyModal({
                              isOpen: true,
                              title: 'SMS Updates',
                              content: 'Receive reservation reminders and confirmations via text message. Standard message and data rates may apply.'
                            })}
                          >
                            <Info className="w-4 h-4" />
                          </button>
                        </div>
                      </div>
                    </div>

                    {/* Submit Button */}
                    <button 
                      onClick={() => {
                        // Check if all required fields are filled
                        const hasErrors = !firstName || !lastName || !email || !phoneNumber || !cancelPolicyChecked;
                        
                        if (hasErrors) {
                          setShowFieldErrors(true);
                          if (!cancelPolicyChecked) {
                            setShowCancelPolicyError(true);
                          }
                          // Scroll to first error
                          setTimeout(() => {
                            const firstError = document.querySelector('.text-red-600');
                            if (firstError) {
                              firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
                            }
                          }, 100);
                          return;
                        }
                        
                        // Show confirmation modal instead of alert
                        setShowBookingModal(false);
                        setTimeout(() => {
                          setShowConfirmation(true);
                        }, 100);
                      }}
                      style={{ backgroundColor: '#2c3f2f' }}
                      className="w-full px-4 py-3 text-white rounded-lg hover:opacity-90 transition-all font-medium text-[15px]"
                    >
                      Submit
                    </button>

                    {/* Terms Text */}
                    <div className="mt-4 text-[13px] text-black text-center leading-relaxed">
                      <p className="mb-2">
                        By clicking "Submit" you agree to the Terms of Service and Privacy Policy
                      </p>
                      <p>
                        For SMS, reply STOP to unsubscribe. Reply HELP for help. Message frequency varies. Message & data rates may apply.
                      </p>
                    </div>
                  </div>
                </div>
              )}

              {/* Policy Modal */}
              {policyModal.isOpen && (
                <>
                  {/* Overlay */}
                  <div 
                    className="fixed inset-0 bg-black bg-opacity-50 z-[100]"
                    onClick={() => setPolicyModal({ isOpen: false, title: '', content: '' })}
                  />
                  
                  {/* Modal */}
                  <div className="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-2xl shadow-2xl z-[110] w-11/12 max-w-lg p-8">
                    <div className="flex items-start justify-between mb-6">
                      <h3 className="text-2xl font-semibold text-black">{policyModal.title}</h3>
                      <button 
                        onClick={() => setPolicyModal({ isOpen: false, title: '', content: '' })}
                        className="w-10 h-10 rounded-full border-2 border-gray-900 flex items-center justify-center hover:bg-gray-100 transition-all flex-shrink-0 ml-4"
                      >
                        <X className="w-5 h-5 text-black" />
                      </button>
                    </div>
                    <div className="text-[17px] text-black leading-relaxed whitespace-pre-line">
                      {policyModal.content}
                    </div>
                  </div>
                </>
              )}

              {/* Booking Confirmation Modal */}
              {showConfirmation && (
                <div className="fixed inset-0 bg-white z-70 overflow-y-auto">
                  <div className="w-full max-w-md mx-auto px-6 py-8">
                    {/* Close Button - Top Right */}
                    <button
                      onClick={() => setShowConfirmation(false)}
                      className="absolute top-6 right-6 p-2 text-gray-400 hover:text-black rounded-lg hover:bg-gray-100 transition-colors z-10"
                    >
                      <X className="w-5 h-5" />
                    </button>

                    {/* Logo */}
                    <div className="flex justify-center mb-8">
                      <img 
                        src="luca-logo.jpg" 
                        alt="Luca Restaurant" 
                        className="h-12 w-auto object-contain max-w-full"
                        onError={(e) => {
                          e.target.style.display = 'none';
                          e.target.nextSibling.style.display = 'block';
                        }}
                      />
                      <div className="text-xl font-bold tracking-wider text-black" style={{display: 'none'}}>
                        LUCA
                      </div>
                    </div>

                    {/* Header */}
                    <div className="mb-8 pb-8 border-b border-gray-200">
                      <h3 className="text-[20px] font-semibold text-black mb-1 leading-tight">We look forward to welcoming you!</h3>
                      <p className="text-[15px] text-gray-600 leading-relaxed">A confirmation email has been sent to {email}</p>
                    </div>

                    {/* Reservation Details */}
                    <div className="mb-8 pb-8 border-b border-gray-200">
                      <h4 className="text-[17px] font-semibold text-black mb-3">Luca Restaurant</h4>
                      
                      <div className="space-y-1">
                        <div className="text-[15px] text-black">
                          {partySize} {partySize === 1 ? 'Guest' : 'Guests'}
                        </div>
                        
                        <div className="text-[15px] text-black">
                          {selectedDate ? formatDate(selectedDate) : ''}
                        </div>
                        
                        <div className="text-[15px] text-black">
                          {selectedTime}
                        </div>
                        
                        <div className="text-[15px] text-black">
                          {selectedTimeType === 'main' ? 'The Dining Room' : 'The Bar'}
                        </div>
                        
                        {upgrades.chefsMenu && upgrades.chefsMenu.quantity > 0 && (
                          <div className="text-[15px] text-black">
                            Chef's Menu ({upgrades.chefsMenu.quantity} x £95)
                          </div>
                        )}
                        
                        {upgrades.winePairing && upgrades.winePairing.quantity > 0 && (
                          <div className="text-[15px] text-black">
                            Chef's Wine Pairing ({upgrades.winePairing.quantity} x £125)
                          </div>
                        )}
                      </div>
                    </div>

                    {/* A Note from Us */}
                    <div className="mb-8 pb-8 border-b border-gray-200">
                      <h4 className="text-[17px] font-semibold text-black mb-3">A note from us</h4>
                      <div className="text-[15px] text-gray-600 leading-relaxed space-y-3">
                        <p>Thank you for booking Luca, we look forward to welcoming you!</p>
                        
                        <p>Tables are held up to 15 minutes; time after which we may offer your table to someone on our waiting list. We understand sometimes things happen to hold us up, so please just give us a call to let us know if you are running late.</p>
                        
                        <p>All of our bookings have a time restriction which is indicated above - Please be mindful of other guests who are booked after you.</p>
                        
                        <p>If you have booked a private dining room or a larger party, minimum spend and cancellation fees might apply. These will have been discussed with you at the time of the booking. Our events team will be in contact to customise your experience.</p>
                        
                        <p>Should you have any special requests or dietary requirements, or if you are celebrating a special occasion, please email us at <a href="mailto:reservations@luca.restaurant" className="text-black underline">reservations@luca.restaurant</a> or give us a call on +44 (0) 203 859 3000 and we'd be more than happy to assist.</p>
                        
                        <p className="mt-4">Warmly,<br/>Luca Team</p>
                      </div>
                    </div>

                    {/* Cancellation Policy */}
                    <div className="mb-8 pb-6 border-b border-gray-200">
                      <h4 className="text-[17px] font-semibold text-black mb-3">Cancellation Policy</h4>
                      <p className="text-[15px] text-gray-600 leading-relaxed mb-3">
                        A credit card is required to confirm all reservations. Please note that for any booking cancelled within 24 hours of the reservation time, there will be a £30 per person fee.
                      </p>
                      <p className="text-[15px] text-gray-600 leading-relaxed">
                        Larger parties and private dining room reservations are subject to a different cancellation policy which is mentioned at the time of the booking.
                      </p>
                    </div>

                    {/* Restaurant Info */}
                    <div className="pt-6">
                      <h4 className="text-[17px] font-semibold text-black mb-4">Luca Restaurant</h4>
                      
                      {/* Google Map */}
                      <div className="mb-4 rounded-lg overflow-hidden">
                        <iframe
                          src="https://www.google.com/maps?q=88+St+John+Street,+London+EC1M+4EH,+UK&output=embed"
                          width="100%"
                          height="200"
                          style={{ border: 0 }}
                          allowFullScreen=""
                          loading="lazy"
                          referrerPolicy="no-referrer-when-downgrade"
                          className="w-full"
                        />
                      </div>
                      
                      <div className="space-y-3 text-[15px] text-gray-600">
                        <div className="flex items-start gap-2">
                          <svg className="w-5 h-5 text-black flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                            <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                            <path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                          </svg>
                          <div>
                            <div className="text-black">88, St John Street</div>
                            <div>London, EC1M 4EH</div>
                          </div>
                        </div>
                        
                        <div className="flex items-center gap-2">
                          <svg className="w-5 h-5 text-black flex-shrink-0" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                            <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
                          </svg>
                          <a href="tel:+442038593000" className="text-black">+44 (0) 203 859 3000</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              )}

              {/* Alert Me Modal */}
              {showAlertModal && (
                <div className="fixed inset-0 bg-white z-60 overflow-y-auto">
                  <div className="w-full max-w-md mx-auto px-6 py-6">
                    {/* Header */}
                    <div className="flex items-center justify-between mb-6">
                      <h2 className="text-2xl font-semibold text-black">Priority Alert Details</h2>
                      <button 
                        onClick={() => setShowAlertModal(false)}
                        className="p-2 hover:bg-gray-100 rounded-lg transition-all"
                      >
                        <X className="w-6 h-6 text-black" />
                      </button>
                    </div>

                    {/* Intro Text */}
                    <p className="text-[17px] text-black mb-6">Alert me when a time slot opens on this date:</p>

                    {/* Date Selection */}
                    <div className="mb-4">
                      <label className="block text-[15px] font-medium text-black mb-2">Date*</label>
                      <button
                        onClick={() => setShowAlertCalendar(true)}
                        className="w-full p-3 border-2 border-gray-300 rounded-lg text-[15px] text-black outline-none transition-colors hover:border-gray-400 text-left flex items-center justify-between"
                      >
                        <span>
                          {(() => {
                            try {
                              if (!alertDate) return 'Select Date';
                              
                              // Parse date string correctly to avoid timezone issues
                              const parts = alertDate.split('-');
                              const year = parseInt(parts[0]);
                              const month = parseInt(parts[1]) - 1;
                              const day = parseInt(parts[2]);
                              const dateObj = new Date(year, month, day);
                              
                              // Check if it's today
                              const today = new Date();
                              const isToday = dateObj.getDate() === today.getDate() && 
                                              dateObj.getMonth() === today.getMonth() && 
                                              dateObj.getFullYear() === today.getFullYear();
                              
                              if (isToday) return 'Today';
                              
                              const dayName = dateObj.toLocaleDateString('en-US', { weekday: 'long' });
                              const monthDay = dateObj.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
                              
                              return `${dayName}, ${monthDay}`;
                            } catch (error) {
                              console.error('Date parsing error:', error);
                              return 'Select Date';
                            }
                          })()}
                        </span>
                        <svg className="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                          <line x1="16" y1="2" x2="16" y2="6"></line>
                          <line x1="8" y1="2" x2="8" y2="6"></line>
                          <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                      </button>
                    </div>

                    {/* Party Size Selection */}
                    <div className="mb-6">
                      <label className="block text-[15px] font-medium text-black mb-2">Number of Guests*</label>
                      <select 
                        value={alertPartySize}
                        onChange={(e) => setAlertPartySize(e.target.value)}
                        className="w-full p-3 border-2 border-gray-300 rounded-lg text-[15px] text-black outline-none transition-colors"
                      >
                        <option value="1">1 guest</option>
                        <option value="2">2 guests</option>
                        <option value="3">3 guests</option>
                        <option value="4">4 guests</option>
                        <option value="5">5 guests</option>
                        <option value="6">6 guests</option>
                      </select>
                    </div>

                    <hr className="my-6 border-gray-300" />

                    {/* Reservation Time Between */}
                    <div className="mb-6">
                      <label className="block text-[15px] font-medium text-black mb-2">Reservation Time Between:*</label>
                      <div className="flex items-center gap-2">
                        <select 
                          value={alertStartTime}
                          onChange={(e) => setAlertStartTime(e.target.value)}
                          className="flex-1 p-3 border-2 border-gray-300 rounded-lg text-[15px] text-black outline-none transition-colors"
                        >
                          <option value="">Choose Start Time</option>
                          <option value="10:00 AM">10:00 AM</option>
                          <option value="10:30 AM">10:30 AM</option>
                          <option value="11:00 AM">11:00 AM</option>
                          <option value="11:30 AM">11:30 AM</option>
                          <option value="12:00 PM">12:00 PM</option>
                          <option value="12:30 PM">12:30 PM</option>
                          <option value="1:00 PM">1:00 PM</option>
                          <option value="1:30 PM">1:30 PM</option>
                          <option value="2:00 PM">2:00 PM</option>
                          <option value="2:30 PM">2:30 PM</option>
                          <option value="3:00 PM">3:00 PM</option>
                          <option value="3:30 PM">3:30 PM</option>
                          <option value="4:00 PM">4:00 PM</option>
                          <option value="4:30 PM">4:30 PM</option>
                          <option value="5:00 PM">5:00 PM</option>
                          <option value="5:30 PM">5:30 PM</option>
                          <option value="6:00 PM">6:00 PM</option>
                          <option value="6:30 PM">6:30 PM</option>
                          <option value="7:00 PM">7:00 PM</option>
                          <option value="7:30 PM">7:30 PM</option>
                          <option value="8:00 PM">8:00 PM</option>
                          <option value="8:30 PM">8:30 PM</option>
                          <option value="9:00 PM">9:00 PM</option>
                          <option value="9:30 PM">9:30 PM</option>
                          <option value="10:00 PM">10:00 PM</option>
                          <option value="10:30 PM">10:30 PM</option>
                        </select>
                        <span className="text-[17px] text-black">-</span>
                        <select 
                          value={alertEndTime}
                          onChange={(e) => setAlertEndTime(e.target.value)}
                          className="flex-1 p-3 border-2 border-gray-300 rounded-lg text-[15px] text-black outline-none transition-colors"
                        >
                          <option value="">Choose End Time</option>
                          <option value="10:00 AM">10:00 AM</option>
                          <option value="10:30 AM">10:30 AM</option>
                          <option value="11:00 AM">11:00 AM</option>
                          <option value="11:30 AM">11:30 AM</option>
                          <option value="12:00 PM">12:00 PM</option>
                          <option value="12:30 PM">12:30 PM</option>
                          <option value="1:00 PM">1:00 PM</option>
                          <option value="1:30 PM">1:30 PM</option>
                          <option value="2:00 PM">2:00 PM</option>
                          <option value="2:30 PM">2:30 PM</option>
                          <option value="3:00 PM">3:00 PM</option>
                          <option value="3:30 PM">3:30 PM</option>
                          <option value="4:00 PM">4:00 PM</option>
                          <option value="4:30 PM">4:30 PM</option>
                          <option value="5:00 PM">5:00 PM</option>
                          <option value="5:30 PM">5:30 PM</option>
                          <option value="6:00 PM">6:00 PM</option>
                          <option value="6:30 PM">6:30 PM</option>
                          <option value="7:00 PM">7:00 PM</option>
                          <option value="7:30 PM">7:30 PM</option>
                          <option value="8:00 PM">8:00 PM</option>
                          <option value="8:30 PM">8:30 PM</option>
                          <option value="9:00 PM">9:00 PM</option>
                          <option value="9:30 PM">9:30 PM</option>
                          <option value="10:00 PM">10:00 PM</option>
                          <option value="10:30 PM">10:30 PM</option>
                        </select>
                      </div>
                    </div>

                    <hr className="my-6 border-gray-300" />

                    {/* First Name */}
                    <div className="mb-4">
                      <label className="block text-[17px] text-black mb-2">First Name*</label>
                      <input 
                        type="text" 
                        placeholder="First Name"
                        value={alertFirstName}
                        onChange={(e) => setAlertFirstName(e.target.value)}
                        className="w-full p-3 border-2 border-gray-300 rounded-lg text-[15px] outline-none focus:border-blue-600"
                      />
                    </div>

                    {/* Last Name */}
                    <div className="mb-4">
                      <label className="block text-[17px] text-black mb-2">Last Name*</label>
                      <input 
                        type="text" 
                        placeholder="Last Name"
                        value={alertLastName}
                        onChange={(e) => setAlertLastName(e.target.value)}
                        className="w-full p-3 border-2 border-gray-300 rounded-lg text-[15px] outline-none focus:border-blue-600"
                      />
                    </div>

                    {/* Email Address */}
                    <div className="mb-4">
                      <label className="block text-[17px] text-black mb-2">Email Address*</label>
                      <input 
                        type="email" 
                        placeholder="Email Address"
                        value={alertEmail}
                        onChange={(e) => setAlertEmail(e.target.value)}
                        className="w-full p-3 border-2 border-gray-300 rounded-lg text-[15px] outline-none focus:border-blue-600"
                      />
                    </div>

                    {/* Phone Number */}
                    <div className="mb-6">
                      <label className="block text-[17px] text-black mb-2">Phone Number*</label>
                      <div className="flex items-center border-2 border-gray-300 rounded-lg focus-within:border-blue-600">
                        <select 
                          className="p-3 outline-none text-[15px] border-none bg-transparent pr-8"
                          style={{
                            appearance: 'none',
                            WebkitAppearance: 'none',
                            MozAppearance: 'none',
                            backgroundImage: 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'16\' height=\'16\' viewBox=\'0 0 24 24\' fill=\'none\' stroke=\'%23000000\' stroke-width=\'2\' stroke-linecap=\'round\' stroke-linejoin=\'round\'%3E%3Cpolyline points=\'6 9 12 15 18 9\'%3E%3C/polyline%3E%3C/svg%3E")',
                            backgroundRepeat: 'no-repeat',
                            backgroundPosition: 'right 8px center',
                            backgroundSize: '16px'
                          }}
                        >
                          <option value="+44">🇬🇧 +44</option>
                          <option value="+1">🇺🇸 +1</option>
                          <option value="+33">🇫🇷 +33</option>
                          <option value="+49">🇩🇪 +49</option>
                          <option value="+39">🇮🇹 +39</option>
                          <option value="+34">🇪🇸 +34</option>
                        </select>
                        <input 
                          type="tel" 
                          placeholder="Phone Number"
                          value={alertPhone}
                          onChange={(e) => setAlertPhone(e.target.value)}
                          className="flex-1 p-3 outline-none text-[15px] border-none"
                        />
                      </div>
                    </div>

                    {/* Checkboxes */}
                    <div className="space-y-4 mb-6">
                      <div className="flex items-start gap-3">
                        <input type="checkbox" className="mt-1 w-4 h-4 flex-shrink-0" />
                        <div className="flex items-start gap-2 flex-1">
                          <span className="text-[15px] text-black">Receive news and offers for Luca Restaurant</span>
                          <button 
                            type="button"
                            className="text-gray-400 hover:text-blue-600 transition-colors flex-shrink-0 mt-0.5"
                            onClick={() => setPolicyModal({
                              isOpen: true,
                              title: 'Marketing Policy',
                              content: "From time to time, we'll contact you via email to keep you in the loop about what's happening at Luca Restaurant!"
                            })}
                          >
                            <Info className="w-4 h-4" />
                          </button>
                        </div>
                      </div>

                      <div className="flex items-start gap-3">
                        <input type="checkbox" className="mt-1 w-4 h-4 flex-shrink-0" />
                        <div className="flex items-start gap-2 flex-1">
                          <span className="text-[15px] text-black">Receive news and offers for all our locations</span>
                          <button 
                            type="button"
                            className="text-gray-400 hover:text-blue-600 transition-colors flex-shrink-0 mt-0.5"
                            onClick={() => setPolicyModal({
                              isOpen: true,
                              title: 'Marketing Policy',
                              content: "From time to time, we'll contact you via email to keep you in the loop about what's happening at all existing and new locations."
                            })}
                          >
                            <Info className="w-4 h-4" />
                          </button>
                        </div>
                      </div>

                      <div className="flex items-start gap-3">
                        <input type="checkbox" className="mt-1 w-4 h-4 flex-shrink-0" defaultChecked />
                        <span className="text-[15px] text-black flex-1">Yes, I'd like to receive text message updates related to this reservation such as reminders and confirmations at the number provided.</span>
                      </div>
                    </div>

                    {/* Submit Button */}
                    <button 
                      onClick={() => {
                        // Close alert modal and show confirmation
                        setShowAlertModal(false);
                        setShowAlertConfirmation(true);
                      }}
                      style={{ backgroundColor: '#2c3f2f' }}
                      className="w-full px-4 py-3 text-white rounded-lg hover:opacity-90 transition-all font-medium text-[15px] flex items-center justify-center gap-2"
                    >
                      <Bell className="w-5 h-5" />
                      Alert Me
                    </button>
                  </div>

                  {/* Custom Calendar for Alert Modal */}
                  {showAlertCalendar && (
                    <CustomCalendar 
                      selectedDate={alertDate}
                      onSelectDate={setAlertDate}
                      onClose={() => setShowAlertCalendar(false)}
                      getNextDays={getNextDays}
                    />
                  )}
                </div>
              )}

              {/* Priority Alert Confirmation */}
              {showAlertConfirmation && (
                <div className="fixed inset-0 bg-white z-70 overflow-y-auto">
                  <div className="w-full max-w-md mx-auto px-6 py-6">
                    {/* Header */}
                    <div className="flex items-start justify-between mb-6">
                      <h2 className="text-xl font-semibold text-black leading-tight pr-8">
                        Your Priority Alert Has Been Set at Luca Restaurant
                      </h2>
                      <button 
                        onClick={() => setShowAlertConfirmation(false)}
                        className="p-2 hover:bg-gray-100 rounded-lg transition-all flex-shrink-0"
                      >
                        <X className="w-6 h-6 text-black" />
                      </button>
                    </div>

                    {/* Confirmation Text */}
                    <p className="text-[15px] text-black mb-6">
                      We will alert you if a reservation becomes available for:
                    </p>

                    {/* Alert Details */}
                    <div className="space-y-4 mb-8">
                      {/* Date */}
                      <div className="flex items-start gap-3">
                        <svg className="w-6 h-6 text-black flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                          <line x1="16" y1="2" x2="16" y2="6"></line>
                          <line x1="8" y1="2" x2="8" y2="6"></line>
                          <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                        <span className="text-[15px] text-black">
                          {alertDate ? new Date(alertDate + 'T00:00:00').toLocaleDateString('en-US', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' }) : 'No date selected'}
                        </span>
                      </div>

                      {/* Party Size */}
                      <div className="flex items-start gap-3">
                        <svg className="w-6 h-6 text-black flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                          <circle cx="9" cy="7" r="4"></circle>
                          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        <span className="text-[15px] text-black">
                          {alertPartySize} {alertPartySize === '1' ? 'guest' : 'guests'}
                        </span>
                      </div>

                      {/* Time Range */}
                      <div className="flex items-start gap-3">
                        <svg className="w-6 h-6 text-black flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                          <circle cx="12" cy="12" r="10"></circle>
                          <polyline points="12,6 12,12 16,14"></polyline>
                        </svg>
                        <span className="text-[15px] text-black">
                          {alertStartTime} - {alertEndTime}
                        </span>
                      </div>

                      {/* Contact Information */}
                      <div className="flex items-start gap-3">
                        <svg className="w-6 h-6 text-black flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" strokeWidth="2" viewBox="0 0 24 24">
                          <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                          <circle cx="9" cy="7" r="4"></circle>
                          <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                          <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        <div className="text-[15px] text-black leading-relaxed">
                          <div>{alertFirstName} {alertLastName}</div>
                          <div>{alertEmail}</div>
                          <div>{alertPhone}</div>
                        </div>
                      </div>
                    </div>

                    {/* Manage Alert Link */}
                    <div className="border-t border-gray-300 pt-6">
                      <button 
                        onClick={() => {
                          // Go back to alert form
                          setShowAlertConfirmation(false);
                          setShowAlertModal(true);
                        }}
                        className="text-[15px] text-black underline hover:opacity-70 transition-opacity"
                      >
                        Manage Alert
                      </button>
                    </div>
                  </div>
                </div>
              )}

              {/* Fixed Footer - Cancellation Policy Link - Bottom Left Corner */}
              {!showBookingModal && !isVideoExpanded && !showAlertModal && !showConfirmation && !showAlertConfirmation && !showWhatsNew && (
                <div className="fixed bottom-4 left-4 z-40 flex items-center gap-2">
                  <button
                    onClick={() => setPolicyModal({
                      isOpen: true,
                      title: 'Cancellation Policy',
                      content: 'We operate a 24 hours cancellation policy of £30 per person for all bookings.\n\nLarger parties and private dining room reservations are subject to a different cancellation policy which is mentioned at the time of the booking.'
                    })}
                    className="text-[13px] text-black hover:text-gray-600 transition-colors"
                  >
                    Cancellation Policy
                  </button>
                  <button
                    onClick={() => setPolicyModal({
                      isOpen: true,
                      title: 'Cancellation Policy',
                      content: 'We operate a 24 hours cancellation policy of £30 per person for all bookings.\n\nLarger parties and private dining room reservations are subject to a different cancellation policy which is mentioned at the time of the booking.'
                    })}
                    className="text-gray-400 hover:text-blue-600 transition-colors"
                  >
                    <Info className="w-4 h-4" />
                  </button>
                </div>
              )}

            </div>
          );
        };

        ReactDOM.render(<TabletopMobileApp />, document.getElementById('root'));
    </script>
</body>
</html>